<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: NFC Type 4 Tag</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nfc_type4tag_dox.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">NFC Type 4 Tag </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Type 4 Tag is one of the tag types that are defined by the NFC Forum. This implementation is based on the following specification document:</p>
<ul>
<li>"Type 4 Tag Technical Specification Version 1.0 2017-08-28 [T4T]"</li>
</ul>
<p>A Type 4 Tag must contain at least the NDEF Tag application. This application provides a file system that consists of at least two Elementary Files (EFs):</p>
<ul>
<li>Capability container (CC) The CC is a read-only metafile that contains the version of the implemented specification, communication parameters of the tag, and properties of all the other EF files that are present on a Type 4 Tag platform.</li>
<li>The NDEF file. The NDEF file (see <a class="el" href="nfc_type4tag_dox.html#nfc_t4t_ndef_file_format_dox">NDEF file format</a>) contains the NDEF message, which can be read or re-written depending on its file properties, which are defined in the CC file.</li>
</ul>
<p>The nRF5 SDK provides a Type 4 Tag library that uses application protocol data units (APDUs) to communicate over the ISO-DEP (ISO14443-4A) protocol with any polling NFC device. As with Type 2 Tag, Type 4 Tag also supports NFC-A listen mode. In this mode, the tag can only wait for polling devices, but it does not actively start a connection.</p>
<p>The Type 4 Tag library provides functions to enable the NFC tag and configure the tag data. It uses the <a class="el" href="group__nrfx__nfct.html">NFCT driver</a> module to access the NFCT hardware. The Type 4 Tag library is available as a precompiled linkable library. Its API is described in <a class="el" href="group__nfc__t4t__lib.html">NFC tag 4 type emulation library</a>.</p>
<dl class="section note"><dt>Note</dt><dd>When using <a class="el" href="group__nrfx__nfct.html">NFCT driver</a>, you must enable the clock in the <code>sdk_config</code> configuration file. To do that, set the following configuration parameter: <div class="fragment"><div class="line"><span class="preprocessor">#define NRF_CLOCK_ENABLED 1</span></div>
</div><!-- fragment --> Additionally, you cannot use TIMER4 because it is used by the <a class="el" href="group__nrfx__nfct.html">NFCT driver</a>.</dd></dl>
<p>The Type 4 Tag library supports three different modes of emulation:</p>
<table class="doxtable">
<tr>
<th>Mode type </th><th>Description</th></tr>
<tr>
<td>Raw ISO-Dep exchanges </td><td>All APDUs are signaled through the callback. </td></tr>
<tr>
<td>Read-Only T4T NDEF tag </td><td>The NDEF file cannot be modified. Only NFC field status and <a class="el" href="group__nfc__t4t__lib.html#gga8e22ebe41d0c549f0dbce2e4f47bde31a83281487e9256fa8e11e357ae5fd2c0d">NFC_T4T_EVENT_NDEF_READ</a> can be signaled through the callback. </td></tr>
<tr>
<td>Read-Write T4T NDEF tag </td><td>The NDEF file can be modified. The changes to the NDEF content are signaled through the callback. </td></tr>
</table>
<p>To read data from the Type 4 Tag, a polling device is needed. Similarly to the Type 2 Tag, you can use either a mobile device or the Adafruit PN532 NFC shield (see <a class="el" href="lib_adafruit.html">Adafruit NFC Shield library</a>). For the NFC shield, the <a class="el" href="nfc_t4t_hl_detection_procedures_dox.html">Type 4 Tag NDEF detection procedure</a> module can be used to parse the raw data into Type 4 Tag format.</p>
<h1><a class="anchor" id="nfc_t4t_ndef_file_format_dox"></a>
NDEF file format</h1>
<p>The NDEF file is a file type that can be present in a Type 4 Tag platform. It consists of following fields:</p>
<table class="doxtable">
<tr>
<th>Field </th><th>Length </th><th>Description</th></tr>
<tr>
<td>NLEN </td><td>2 bytes </td><td>Length of the NDEF message in big-endian format. </td></tr>
<tr>
<td>NDEF Message </td><td>NLEN bytes </td><td>NDEF message. See <a class="el" href="nfc_ndef_format_dox.html">NDEF message and record format</a>. </td></tr>
</table>
<p>You can notice that NDEF file adds one additional field in comparison to the raw NDEF message. It is called NLEN and is required for an NDEF file. This field encodes the total length of the NDEF message.</p>
<p><a class="el" href="nfc_t4t_hl_detection_procedures_dox.html">Type 4 Tag NDEF detection procedure</a> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

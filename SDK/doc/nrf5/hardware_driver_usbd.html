<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: USBD driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hardware_driver_usbd.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">USBD driver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="whichnRF nRF52840"><span>This information applies to the following SoCs: <b>nRF52833</b> and <b>nRF52840</b>.</span></div><p>The USB device (USBD) driver includes two layers: the hardware access layer (HAL) and the driver layer (DRV).</p>
<p>The hardware access layer provides basic APIs for accessing the registers of the USBD peripheral. For details, see the API documentation for the <a class="el" href="group__nrf__usbd__hal.html">USBD HAL</a>.</p>
<p>The driver provides APIs on a higher level than the HAL. For details, see the API documentation for the <a class="el" href="group__nrf__drv__usbd.html">USBD driver - legacy layer</a>.</p>
<p>Key features of this driver include:</p>
<ul>
<li>Support for a single instance only.</li>
<li>Architecture that is completely event driven. Most of the library processing is handled in interrupts.</li>
<li>16 bulk endpoints: eight&#160;IN and eight&#160;OUT.<ul>
<li>Any endpoint size up to 64&#160;B.</li>
</ul>
</li>
<li>Two isochronous endpoints: one&#160;IN and one&#160;OUT.<ul>
<li>Any endpoint size up to 1024&#160;B or up to 512&#160;B when both endpoints are in use.</li>
</ul>
</li>
<li>Setup packet decoding.</li>
<li>Setup data packets, bulk, and isochronous transfers use a consistent and similar interface.</li>
<li>Transfers from the flash memory, realized in software transparently.</li>
<li>Set and forget functionality for long transfers (not for isochronous endpoints).</li>
</ul>
<p>The driver can have four different states:</p>
<ul>
<li>Uninitialized: the driver cannot be used.</li>
<li>Initialized:<ul>
<li>The event handler is configured.</li>
<li>All endpoints size configured to maximum.</li>
<li>The peripheral is still disabled.</li>
</ul>
</li>
<li>Enabled:<ul>
<li>The peripheral itself is enabled.</li>
<li>Peripheral 48&#160;MHz clock is active.</li>
<li>Interrupts stay disabled.</li>
<li>USB pins pull-up is disabled.</li>
</ul>
</li>
<li>Started:<ul>
<li>Fully functional library.</li>
<li>Interrupts are enabled.</li>
<li>USB pins pull-up is enabled.</li>
</ul>
</li>
</ul>
<p>See the following function documentation for more details about the USBD driver states:</p>
<ul>
<li><a class="el" href="group__nrf__drv__usbd.html#ga4544dbcc2cd3199600958c563ee0c9cf">nrf_drv_usbd_init</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga306364c727f1f8bd9857597cd71d91e2">nrf_drv_usbd_enable</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga9654e406b768f8f9fabac3e1e07ab862">nrf_drv_usbd_disable</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#gad0c866b4b5267f75005ce4b1c8c1b998">nrf_drv_usbd_start</a></li>
</ul>
<h1><a class="anchor" id="hardware_driver_usbd_usage"></a>
Using the USBD driver</h1>
<p>Example code that provides USB HID functionality using only the USBD driver can be found here: <a class="el" href="usbd_example.html">USB Device Example</a>. Compared to the other USB examples available in this SDK, this example does not use the USBD high level library.</p>
<p>The driver's functionality can be divided into three types of functions:</p>
<ul>
<li>Functions that modify the internal state of the whole library:<ul>
<li><a class="el" href="group__nrf__drv__usbd.html#ga4544dbcc2cd3199600958c563ee0c9cf">nrf_drv_usbd_init</a> and <a class="el" href="group__nrf__drv__usbd.html#gad099d91773159804cca4adcf9ac0b3c1">nrf_drv_usbd_uninit</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga306364c727f1f8bd9857597cd71d91e2">nrf_drv_usbd_enable</a> and <a class="el" href="group__nrf__drv__usbd.html#ga9654e406b768f8f9fabac3e1e07ab862">nrf_drv_usbd_disable</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#gad0c866b4b5267f75005ce4b1c8c1b998">nrf_drv_usbd_start</a> and <a class="el" href="group__nrf__drv__usbd.html#ga2862b9ac7c98a8e17236cb8a7706bcc3">nrf_drv_usbd_stop</a></li>
<li>Internal status functions: <a class="el" href="group__nrf__drv__usbd.html#ga3b6f211d6ddb535a80ebe61f225f61b8">nrf_drv_usbd_is_initialized</a>, <a class="el" href="group__nrf__drv__usbd.html#ga4abb937af181efb649f878e8e853fd83">nrf_drv_usbd_is_enabled</a>, and <a class="el" href="group__nrf__drv__usbd.html#gab05f9bfd2b8ce3160e41d5deef46e327">nrf_drv_usbd_is_started</a></li>
</ul>
</li>
<li>Functions related to the endpoints:<ul>
<li>Data transfer:<ul>
<li><a class="el" href="group__nrf__drv__usbd.html#ga20ea0ca100ba53a4741e2682c8bfe06a">nrf_drv_usbd_ep_transfer</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga55ba050ff87e01f7012a5a9fae3f2951">nrf_drv_usbd_ep_handled_transfer</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#gad2d8c7fd834a8eca501659876832a96a">nrf_drv_usbd_ep_abort</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#gad206add7e5d2638672d85e49c0f99726">nrf_drv_usbd_transfer_out_drop</a></li>
</ul>
</li>
<li>State and status:<ul>
<li><a class="el" href="group__nrf__drv__usbd.html#gad52dfce1652fefcbc53567c422c4d73b">nrf_drv_usbd_ep_max_packet_size_set</a>, and <a class="el" href="group__nrf__drv__usbd.html#ga3c6e20106a719065e42f9f46c33715f6">nrf_drv_usbd_ep_max_packet_size_get</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#gab511b15237d2334c613908bd91101ed4">nrf_drv_usbd_ep_enable</a>, <a class="el" href="group__nrf__drv__usbd.html#ga8d2580e24365efbae044db01c69bf5e3">nrf_drv_usbd_ep_disable</a>, and <a class="el" href="group__nrf__drv__usbd.html#gac63ec6d18aa0f64d2519755837d90c6a">nrf_drv_usbd_ep_enable_check</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga809e3e0a74b3f92997057e9d4c8325fa">nrf_drv_usbd_ep_status_get</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga438062fc83cc2d5a6ee962a5408fa7c8">nrf_drv_usbd_epout_size_get</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga24db43a3592e4ee38e36ee7b88a29266">nrf_drv_usbd_ep_is_busy</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga5dd647d4c4030c0fead0a4d4f8ca7ee2">nrf_drv_usbd_ep_stall</a>, <a class="el" href="group__nrf__drv__usbd.html#ga418b66322235c9a30c2f606f0f955d59">nrf_drv_usbd_ep_stall_clear</a>, and <a class="el" href="group__nrf__drv__usbd.html#gad1e162ed92b33635963fa8135e49270c">nrf_drv_usbd_ep_stall_check</a></li>
</ul>
</li>
</ul>
</li>
<li>Functions related to the setup messages:<ul>
<li><a class="el" href="group__nrf__drv__usbd.html#ga92959025c8ac622364d22e5ca6d4591d">nrf_drv_usbd_setup_get</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga94463e11da0147684d699af47dc6b38a">nrf_drv_usbd_setup_data_clear</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga0fb53eea939e4803b459a1d77f9b7186">nrf_drv_usbd_setup_clear</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga581b1ad24d0250546bb30e78b30f1046">nrf_drv_usbd_setup_stall</a></li>
<li><a class="el" href="group__nrf__drv__usbd.html#ga29cfabd93c5631067637e880cd1053b8">nrf_drv_usbd_last_setup_dir_get</a></li>
</ul>
</li>
</ul>
<p>To start the USBD driver, you must initialize it first:</p>
<div class="fragment"><div class="line"><a class="code" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b" title="API Result.">ret_code_t</a> ret;</div>
<div class="line"></div>
<div class="line">ret = <a class="code" href="group__nrf__drv__usbd.html#ga4544dbcc2cd3199600958c563ee0c9cf" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_init</a>(usbd_event_handler);</div>
<div class="line"><a class="code" href="group__app__error.html#ga82d00a810dcea7dcc6af469461fb254c" title="Macro for calling error handler function if supplied error code any other than NRF_SUCCESS.">APP_ERROR_CHECK</a>(ret);</div>
</div><!-- fragment --><p>The event handler provided to the <a class="el" href="group__nrf__drv__usbd.html#ga4544dbcc2cd3199600958c563ee0c9cf">nrf_drv_usbd_init</a> function will process all events that come from the driver:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> usbd_event_handler(<a class="code" href="structnrfx__usbd__evt__t.html" title="Event structure.">nrf_drv_usbd_evt_t</a> <span class="keyword">const</span> * <span class="keyword">const</span> p_event)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(p_event-&gt;<a class="code" href="structnrfx__usbd__evt__t.html#a47b657889ef8bfdd5a452bded74cb4f9">type</a>)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__usbd.html#gaa8a168ed5a5be5a1560542cc3a3387fb" title="Type definition for forwarding the new implementation.">NRF_DRV_USBD_EVT_SOF</a>:</div>
<div class="line">        {</div>
<div class="line">            ...</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__usbd.html#ga12d3414a58626f95109aab728e2ce369" title="Type definition for forwarding the new implementation.">NRF_DRV_USBD_EVT_RESET</a>:</div>
<div class="line">        {</div>
<div class="line">            ...</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__usbd.html#ga30bf06033d68729362ed492bedcb45be" title="Type definition for forwarding the new implementation.">NRF_DRV_USBD_EVT_SUSPEND</a>:</div>
<div class="line">        {</div>
<div class="line">            ...</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__usbd.html#ga245be283b501bae05e30c2a490c638c9" title="Type definition for forwarding the new implementation.">NRF_DRV_USBD_EVT_RESUME</a>:</div>
<div class="line">        {</div>
<div class="line">            ...</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__usbd.html#ga4a8944469ddc77b75b649f7e43e9a8d5" title="Type definition for forwarding the new implementation.">NRF_DRV_USBD_EVT_SETUP</a>:</div>
<div class="line">        {</div>
<div class="line">            ...</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__usbd.html#ga9ce09b87e3de50d06a10905ee9e0c458" title="Type definition for forwarding the new implementation.">NRF_DRV_USBD_EVT_EPTRANSFER</a>:</div>
<div class="line">        {</div>
<div class="line">            ...</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>In most cases, enabling and starting of the USBD driver will be processed in response to USB power events (see <a class="el" href="group__nrf__drv__power.html#gac86bbb91b3eb105d29295fc31cd63594">nrf_drv_power_usbevt_init</a>). Using the <a class="el" href="group__nrf__drv__power.html">POWER driver - legacy layer</a> driver, USB can be initialized in the following way:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> power_usb_event_handler(<a class="code" href="group__nrf__drv__power.html#gab917874da4bb3fd4995b52ab295031f7" title="Macro for forwarding the new implementation.">nrf_drv_power_usb_evt_t</a> event)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">switch</span>(event)</div>
<div class="line">    {</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__power.html#gaa0fdd7a7552a058d08a716baf220442a" title="Macro for forwarding the new implementation.">NRF_DRV_POWER_USB_EVT_DETECTED</a>:</div>
<div class="line">        <span class="keywordflow">if</span>(!<a class="code" href="group__nrf__drv__usbd.html#ga4abb937af181efb649f878e8e853fd83" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_is_enabled</a>())</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__nrf__drv__usbd.html#ga306364c727f1f8bd9857597cd71d91e2" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_enable</a>();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__power.html#ga5d02a6fb11c1556672d543df68d313b8" title="Macro for forwarding the new implementation.">NRF_DRV_POWER_USB_EVT_REMOVED</a>:</div>
<div class="line">        <span class="keywordflow">if</span>(<a class="code" href="group__nrf__drv__usbd.html#gab05f9bfd2b8ce3160e41d5deef46e327" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_is_started</a>())</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__nrf__drv__usbd.html#ga2862b9ac7c98a8e17236cb8a7706bcc3" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_stop</a>();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span>(<a class="code" href="group__nrf__drv__usbd.html#ga4abb937af181efb649f878e8e853fd83" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_is_enabled</a>())</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__nrf__drv__usbd.html#ga9654e406b768f8f9fabac3e1e07ab862" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_disable</a>();</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__power.html#gab685fc4f83563ad70a400246fb2a5a40" title="Macro for forwarding the new implementation.">NRF_DRV_POWER_USB_EVT_READY</a>:</div>
<div class="line">        <span class="keywordflow">if</span>(!<a class="code" href="group__nrf__drv__usbd.html#gab05f9bfd2b8ce3160e41d5deef46e327" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_is_started</a>())</div>
<div class="line">        {</div>
<div class="line">            <a class="code" href="group__nrf__drv__usbd.html#gad0c866b4b5267f75005ce4b1c8c1b998" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_start</a>(<span class="keyword">true</span>);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">        ASSERT(<span class="keyword">false</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The USB driver is fully functional as soon as the <a class="el" href="group__nrf__drv__usbd.html#gad0c866b4b5267f75005ce4b1c8c1b998">nrf_drv_usbd_start</a> function is processed.</p>
<p>You can now start transferring any data over endpoints. For example, the following code presents sending data in response to the SETUP command on EP0:</p>
<div class="fragment"><div class="line"><a class="code" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b" title="API Result.">ret_code_t</a> ret;</div>
<div class="line"><a class="code" href="structnrfx__usbd__transfer__t.html" title="Total transfer configuration.">nrf_drv_usbd_transfer_t</a> transfer =</div>
<div class="line">{</div>
<div class="line">    .<a class="code" href="structnrfx__usbd__transfer__t.html#a40076cf49fa976d6dd7de61a6d881bac" title="Union with available data pointers used by the driver.">p_data</a> = {.<a class="code" href="unionnrfx__usbd__data__ptr__t.html#a52d1b195bbdf96c985b6d79476f0410a" title="Constant TX buffer pointer.">tx</a> = p_data},</div>
<div class="line">    .size = size</div>
<div class="line">};</div>
<div class="line">ret = <a class="code" href="group__nrf__drv__usbd.html#ga20ea0ca100ba53a4741e2682c8bfe06a" title="Type definition for forwarding the new implementation.">nrf_drv_usbd_ep_transfer</a>(<a class="code" href="group__nrf__drv__usbd.html#ga42b706a3682e2542c8b5944d20e98a34" title="Type definition for forwarding the new implementation.">NRF_DRV_USBD_EPIN0</a>, &amp;transfer);</div>
</div><!-- fragment --><p>When the transmission is finished, the <a class="el" href="group__nrf__drv__usbd.html#ga9ce09b87e3de50d06a10905ee9e0c458">NRF_DRV_USBD_EVT_EPTRANSFER</a> event is generated. See <a class="el" href="group__nrf__drv__usbd.html#gafec41475900bd2232956865a26b7b877">nrf_drv_usbd_evt_t</a> and <a class="el" href="group__nrf__drv__usbd.html#ga63ea3ba12141bfe5d602102ba2fe91ad">nrf_drv_usbd_ep_status_t</a> for more details. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

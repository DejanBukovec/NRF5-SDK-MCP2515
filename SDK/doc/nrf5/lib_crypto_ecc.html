<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: ECC - Elliptic Curve Cryptography</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lib_crypto_ecc.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">ECC - Elliptic Curve Cryptography </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>An Elliptic Curve Cryptography is a set of asymmetric cryptography algorithms. It uses private and public keys that are related to each other and create a key pair.</p>
<p>For detailed API documentation of this module, see <a class="el" href="group__nrf__crypto__ecc.html">Elliptic Curve Cryptography Key Management</a>.</p>
<h1><a class="anchor" id="lib_crypto_ecc_keygen"></a>
Key Management</h1>
<p>A <b>private key</b> is known only to the owner. It cannot be shared with anyone. Leaking a private key causes serious security issues for products that use such a key. From the technical point of view, a private key is a random big integer (for example, 256-bit long) that fulfills the constraints defined by the curve parameters.</p>
<p>A <b>public key</b> can be shared with anyone. It is generated from a private key. This operation is one way, so it is computationally infeasible to compute a private key from a public key. From the technical point of view, a public key is a point on the elliptic curve over finite field, so it consists of x and y coordinates (or only one coordinate in case of Curve25519 and Ed25519). Each coordinate is a big integer with the same size as the associated private key.</p>
<p>A key pair is associated with a specific curve type and can be used only for the curve that it was created for. See <a class="el" href="lib_crypto_ecc.html#lib_crypto_ecc_backend">Backends</a> for a list of curve types supported by this library. A key pair is used for both <a class="el" href="lib_crypto_ecdsa.html">ECDSA - Elliptic Curve Digital Signature Algorithm</a> and <a class="el" href="lib_crypto_ecdh.html">ECDH - Elliptic Curve Diffie–Hellman</a>.</p>
<h2><a class="anchor" id="lib_crypto_ecc_keygen_api"></a>
API</h2>
<p>In this library:</p>
<ul>
<li>a private key is represented by the <a class="el" href="unionnrf__crypto__ecc__private__key__t.html">nrf_crypto_ecc_private_key_t</a> union,</li>
<li>a public key is represented by <a class="el" href="unionnrf__crypto__ecc__public__key__t.html">nrf_crypto_ecc_public_key_t</a>.</li>
</ul>
<p>The library allows for conversion between this internal representation and raw format, which is an array of bytes containing two big integers in big-endian order or one integer in little-endian order in case of Curve25519 and Ed25519. Array types <a class="el" href="group__nrf__crypto__ecc.html#gaa1b4b4c88b8e799ac078178201110f55">nrf_crypto_ecc_raw_private_key_t</a> and <a class="el" href="group__nrf__crypto__ecc.html#ga78e9980e9672ac93d87437b350554f18">nrf_crypto_ecc_raw_public_key_t</a> are big enough to hold a raw key for any of the enabled curve types. There are also curve-specific types, for example <a class="el" href="group__nrf__crypto__ecc__secp256r1.html#gaa08f47f876f197d1f097f3582e4ddcf7">nrf_crypto_ecc_secp256r1_private_key_t</a> or <a class="el" href="group__nrf__crypto__ecc__secp256r1.html#gac2eb22304f7dad8c206a37602105c343">nrf_crypto_ecc_secp256r1_raw_private_key_t</a> that can be used to reduce memory consumption. See <a class="el" href="lib_crypto_ecc.html#lib_crypto_ecc_mem">Memory saving</a> for more details.</p>
<p>A public key and a private key can be generated using the nrf_crypto library. Use <a class="el" href="group__nrf__crypto__ecc.html#ga3f81d85351bf50c8dcd07a87cb7c6e26">nrf_crypto_ecc_key_pair_generate</a> to generate a key pair or <a class="el" href="group__nrf__crypto__ecc.html#ga14a07dc7bb466e35d1f3726c759acbcf">nrf_crypto_ecc_public_key_calculate</a> to only calculate a public key from a known private key. It is not necessary to store the private and public key pair together. A public key can be generated from a private key on demand. This reduces memory usage, but it causes slower access to public key. Use the following functions to run conversions between internal key representation and raw format:</p>
<ul>
<li><a class="el" href="group__nrf__crypto__ecc.html#ga34b69768c42de20110281a589e05b6e6">nrf_crypto_ecc_private_key_from_raw</a>,</li>
<li><a class="el" href="group__nrf__crypto__ecc.html#ga1f9223903857bfd9d2a292f2c56bde7e">nrf_crypto_ecc_private_key_to_raw</a>,</li>
<li><a class="el" href="group__nrf__crypto__ecc.html#ga07bad097cd705b52d6e9d29c63146459">nrf_crypto_ecc_public_key_from_raw</a>,</li>
<li><a class="el" href="group__nrf__crypto__ecc.html#gafdfc93d7e5d4c03a4412228428761af7">nrf_crypto_ecc_public_key_to_raw</a>.</li>
</ul>
<p>Byte order of all the input and output byte arrays corresponds to the common practice in the ECC cryptography. Curve25519 and Ed25519 use little-endian, while the other curve types use big-endian. The function <a class="el" href="group__nrf__crypto__ecc.html#gabedfa4cd51adab448cd4c90953082429">nrf_crypto_ecc_byte_order_invert</a> can be used to convert between little-endian and big-endian. <a class="el" href="group__nrf__crypto__config.html#ga27f0ffa10b554646b0e1c1b566ea866b">NRF_CRYPTO_CURVE25519_BIG_ENDIAN_ENABLED</a> option can be set 1 to change the endiannes of Curve25519.</p>
<p>Each function that creates a new key needs a <a class="el" href="group__nrf__crypto__ecc.html#ga055d695ace6d387a7c81420c281b87a0">nrf_crypto_ecc_curve_info_t</a> structure. Users should not define the content of this structure. Instead, the library defines it in global variables, such as <a class="el" href="group__nrf__crypto__ecc__secp256r1.html#ga7d6a6230b8f267f2d5e9971ea2b3ef42">g_nrf_crypto_ecc_secp256r1_curve_info</a> for secp256r1.</p>
<h1><a class="anchor" id="lib_crypto_ecc_ex"></a>
Code examples</h1>
<p>Private-public key pair generation: </p>
<div class="fragment"><div class="line"><a class="code" href="unionnrf__crypto__ecc__key__pair__generate__context__t.html" title="Union holding a context for a key pair generation.">nrf_crypto_ecc_key_pair_generate_context_t</a>  keygen_context;</div>
<div class="line"><a class="code" href="unionnrf__crypto__ecc__private__key__t.html" title="Union holding representation of a private key for any curve type.">nrf_crypto_ecc_private_key_t</a>                my_private_key;</div>
<div class="line"><a class="code" href="unionnrf__crypto__ecc__public__key__t.html" title="Union holding representation of a public key for any curve type.">nrf_crypto_ecc_public_key_t</a>                 my_public_key;</div>
<div class="line"></div>
<div class="line">err_code = <a class="code" href="group__nrf__crypto__ecc.html#ga3f81d85351bf50c8dcd07a87cb7c6e26" title="Generate a new pair of a public key and a private key.">nrf_crypto_ecc_key_pair_generate</a>(</div>
<div class="line">                keygen_context,                             <span class="comment">// Keygen context</span></div>
<div class="line">                &amp;<a class="code" href="group__nrf__crypto__ecc__secp521r1.html#gad75ab83be40d05403c952a0d7f876c98" title="Variable containing information on secp521r1 (NIST 521-bit).">g_nrf_crypto_ecc_secp521r1_curve_info</a>,     <span class="comment">// Info structure</span></div>
<div class="line">                &amp;my_private_key,                            <span class="comment">// Output private key</span></div>
<div class="line">                &amp;my_public_key);                            <span class="comment">// Output public key</span></div>
</div><!-- fragment --><p>Public key generation from an existing private key: </p>
<div class="fragment"><div class="line"><a class="code" href="unionnrf__crypto__ecc__public__key__calculate__context__t.html" title="Union holding a context for a public key calculation.">nrf_crypto_ecc_public_key_calculate_context_t</a>   calc_context;</div>
<div class="line"><a class="code" href="unionnrf__crypto__ecc__private__key__t.html" title="Union holding representation of a private key for any curve type.">nrf_crypto_ecc_private_key_t</a>                    my_private_key;</div>
<div class="line"><a class="code" href="unionnrf__crypto__ecc__public__key__t.html" title="Union holding representation of a public key for any curve type.">nrf_crypto_ecc_public_key_t</a>                     my_public_key;</div>
<div class="line"></div>
<div class="line">err_code = <a class="code" href="group__nrf__crypto__ecc.html#ga14a07dc7bb466e35d1f3726c759acbcf" title="Calculate public key associated with provided private key.">nrf_crypto_ecc_public_key_calculate</a>(&amp;calc_context,    <span class="comment">// Context</span></div>
<div class="line">                                               &amp;my_private_key,  <span class="comment">// Input private key</span></div>
<div class="line">                                               &amp;my_public_key);  <span class="comment">// Output public key</span></div>
</div><!-- fragment --><p>Conversion of a raw private key to internal representation: </p>
<div class="fragment"><div class="line"><span class="keyword">const</span> uint8_t my_raw_private_key[] = {</div>
<div class="line">    0x23, 0x8F, 0x43, 0x88, ... <span class="comment">// 32 bytes (256-bits) of raw private key</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="unionnrf__crypto__ecc__private__key__t.html" title="Union holding representation of a private key for any curve type.">nrf_crypto_ecc_private_key_t</a>                    my_private_key;</div>
<div class="line"></div>
<div class="line">err_code = <a class="code" href="group__nrf__crypto__ecc.html#ga34b69768c42de20110281a589e05b6e6" title="Create a private key from a raw data.">nrf_crypto_ecc_private_key_from_raw</a>(</div>
<div class="line">            &amp;<a class="code" href="group__nrf__crypto__ecc__secp256r1.html#ga7d6a6230b8f267f2d5e9971ea2b3ef42" title="Variable containing information on secp256r1 (NIST 256-bit).">g_nrf_crypto_ecc_secp256r1_curve_info</a>,     <span class="comment">// Info structure</span></div>
<div class="line">            &amp;my_private_key,                            <span class="comment">// Output private key</span></div>
<div class="line">            my_raw_private_key,                         <span class="comment">// Predefined raw private key bytes</span></div>
<div class="line">            <span class="keyword">sizeof</span>(my_raw_private_key));                <span class="comment">// Number of bytes in raw private key</span></div>
</div><!-- fragment --><p>Conversion of internal representation of a public key to a raw public key: </p>
<div class="fragment"><div class="line"><a class="code" href="group__nrf__crypto__ecc.html#ga78e9980e9672ac93d87437b350554f18" title="Type big enough to hold a raw public key for any the enabled curves.">nrf_crypto_ecc_raw_public_key_t</a>     output_raw_public_key;  <span class="comment">// Raw key buffer</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">size_t</span> raw_key_size = <span class="keyword">sizeof</span>(output_raw_public_key);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">err_code = <a class="code" href="group__nrf__crypto__ecc.html#gafdfc93d7e5d4c03a4412228428761af7" title="Convert a public key to a raw data.">nrf_crypto_ecc_public_key_to_raw</a>(&amp;public_key,           <span class="comment">// Public key</span></div>
<div class="line">                                            output_raw_public_key, <span class="comment">// Raw key</span></div>
<div class="line">                                            &amp;raw_key_size);        <span class="comment">// Raw size</span></div>
</div><!-- fragment --><p>Private and public keys can also be generated outside of the device using OpenSSL or other similar tools. The following two commands show how OpenSSL can be used to create a <code>priv.pem</code> file with a newly generated key pair and show the content in raw hex format:</p>
<div class="fragment"><div class="line">openssl ecparam -name secp256r1 -genkey -noout -out priv.pem</div>
<div class="line">openssl ec -in priv.pem -text -noout</div>
</div><!-- fragment --><p>Curve name "secp256r1" can be replaced by any other curve name in the above example. OpenSSL uses different naming for brainpool curves: "brainpoolP<em>XYZ</em>r1" instead of "bp<em>XYZ</em>r1". The public key in OpenSSL output resulting from this command is prefixed by byte '04' and a private key may be prefixed by a zero byte '00', so they must be removed before using the key in the nrf_crypto library.</p>
<h1><a class="anchor" id="lib_crypto_ecc_backend"></a>
Backends</h1>
<p>The ECC part of the cryptography library uses the following <a class="el" href="lib_crypto_ecc.html#lib_crypto_ecc_backend">backends</a> to provide public key cryptography:</p>
<ul>
<li><a class="el" href="lib_crypto_backend_nrf_cc310.html">nrf_cc310 backend</a> - Hardware-accelerated backend available on the nRF52840 SoC.</li>
<li><a class="el" href="lib_crypto_backend_nrf_cc310_bl.html">nrf_cc310_bl backend</a> - Reduced variant of the CC310 backend implementing only digital signature verification focused on small code size.</li>
<li><a class="el" href="lib_crypto_backend_mbedtls.html">mbed TLS backend</a> - ARM SSL library for embedded products.</li>
<li><a class="el" href="lib_crypto_backend_nrf_oberon.html">nrf_oberon backend</a> - Optimized Cryptography Library from Oberon microsystems, Inc.</li>
<li><a class="el" href="lib_crypto_backend_micro_ecc.html">micro_ecc backend</a> - An open source, small, and fast ECDH and ECDSA implementation. See <a href="https://github.com/kmackay/micro-ecc" target="_blank">micro-ecc GitHub repository</a>.</li>
</ul>
<p>ECC functionality depends on the selected backend. Function availability is summarized in below table:</p>
<table class="doxtable">
<tr>
<th>API functions </th><th align="center">CC310 </th><th align="center">mbed TLS </th><th align="center">Oberon </th><th align="center">µECC </th><th align="center">CC310_BL </th></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#ga3f81d85351bf50c8dcd07a87cb7c6e26">nrf_crypto_ecc_key_pair_generate</a> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#ga14a07dc7bb466e35d1f3726c759acbcf">nrf_crypto_ecc_public_key_calculate</a> </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#ga34b69768c42de20110281a589e05b6e6">nrf_crypto_ecc_private_key_from_raw</a> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#ga1f9223903857bfd9d2a292f2c56bde7e">nrf_crypto_ecc_private_key_to_raw</a> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#ga07bad097cd705b52d6e9d29c63146459">nrf_crypto_ecc_public_key_from_raw</a> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#gafdfc93d7e5d4c03a4412228428761af7">nrf_crypto_ecc_public_key_to_raw</a> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#ga5351846dbcd164501cbf375f47467219">nrf_crypto_ecc_private_key_free</a> <sup>1</sup><br/>
<a class="el" href="group__nrf__crypto__ecc.html#gaf2e736c810d2a71dfc9f4df3cc1a6d62">nrf_crypto_ecc_public_key_free</a> <sup>1</sup></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td></tr>
</table>
<p><sup>1</sup> - Key-free functions are implemented only in mbed TLS backend. Other backends have empty functions to keep API compatibility.</p>
<h2><a class="anchor" id="lib_crypto_ecc_dep"></a>
Dependencies</h2>
<p><a class="el" href="lib_crypto_rng.html">RNG - Random Number Generator</a> is required for the <a class="el" href="group__nrf__crypto__ecc.html#ga3f81d85351bf50c8dcd07a87cb7c6e26">nrf_crypto_ecc_key_pair_generate</a> function. It must be correctly configured and initialized before calling the function.</p>
<h1><a class="anchor" id="lib_crypto_ecc_enable"></a>
Enabling the curves</h1>
<p>Each supported curve type can be independently selected from any of the enabled backends. This can be done using the <a class="el" href="sdk_config.html">SDK configuration header file</a>. For example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define NRF_CRYPTO_BACKEND_CC310_ENABLED 1                // Enable the CC310 backend.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define NRF_CRYPTO_BACKEND_CC310_ECC_SECP256R1_ENABLED 1  // Enable secp256r1 curve implementation in the CC310 backend.</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define NRF_CRYPTO_BACKEND_CC310_ECC_SECP521R1_ENABLED 1  // Enable secp521r1 curve implementation in the CC310 backend.</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define NRF_CRYPTO_BACKEND_OBERON_ENABLED 1               // Enable Oberon cryptography library backend.</span></div>
<div class="line"><span class="preprocessor">#define NRF_CRYPTO_BACKEND_OBERON_ECC_CURVE25519_ENABLED 1// Enable Curve25519 signature scheme in the Oberon cryptography library backend.</span></div>
</div><!-- fragment --><p>In this example, users can use curve secp256r1, curve secp521r1, and Curve25519 in their application. Curves secp256r1 and secp521r1 will be realized by the CC310 library and Curve25519 will be realized by the Oberon crypto library.</p>
<p>It is not possible to enable the same curve in two or more backends. This results in a compilation error. For more details, see <a class="el" href="lib_crypto_config.html">Configuring nrf_crypto frontend and backends</a>.</p>
<h1><a class="anchor" id="lib_crypto_ecc_mem"></a>
Memory saving</h1>
<p>The first step to memory saving is to disable all curves that are not used (see <a class="el" href="lib_crypto_ecc.html#lib_crypto_ecc_enable">Enabling the curves</a>). This allows to remove unused code and reduces the size of some unions. Additionally, backends have different memory requirements, so choosing a different backend can help.</p>
<p>All ECC API (including ECDSA and ECDH) uses types that are big enough to hold data for the biggest curve. In situations in which the exact curve type is known, you can use curve-specific types. Type casting must be done to pass a curve-specific type in a parameter. There is no point in using curve-specific types when only one curve is enabled. The following example table shows types specific to curve secp256r1.</p>
<table class="doxtable">
<tr>
<th>General type </th><th>secp256r1 type </th></tr>
<tr>
<td><a class="el" href="unionnrf__crypto__ecc__private__key__t.html">nrf_crypto_ecc_private_key_t</a> </td><td><a class="el" href="group__nrf__crypto__ecc__secp256r1.html#gaa08f47f876f197d1f097f3582e4ddcf7">nrf_crypto_ecc_secp256r1_private_key_t</a> </td></tr>
<tr>
<td><a class="el" href="unionnrf__crypto__ecc__public__key__t.html">nrf_crypto_ecc_public_key_t</a> </td><td><a class="el" href="group__nrf__crypto__ecc__secp256r1.html#ga51c2af12c64b6d66c738726ce68adee6">nrf_crypto_ecc_secp256r1_public_key_t</a> </td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#gaa1b4b4c88b8e799ac078178201110f55">nrf_crypto_ecc_raw_private_key_t</a> </td><td><a class="el" href="group__nrf__crypto__ecc__secp256r1.html#gac2eb22304f7dad8c206a37602105c343">nrf_crypto_ecc_secp256r1_raw_private_key_t</a> </td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecc.html#ga78e9980e9672ac93d87437b350554f18">nrf_crypto_ecc_raw_public_key_t</a> </td><td><a class="el" href="group__nrf__crypto__ecc__secp256r1.html#ga2f4e501ad067bbe47380f7a431f59774">nrf_crypto_ecc_secp256r1_raw_public_key_t</a> </td></tr>
<tr>
<td><a class="el" href="unionnrf__crypto__ecc__key__pair__generate__context__t.html">nrf_crypto_ecc_key_pair_generate_context_t</a> </td><td><a class="el" href="group__nrf__crypto__ecc__secp256r1.html#ga2fc945655556cf14673abda84ca00456">nrf_crypto_ecc_secp256r1_key_pair_generate_context_t</a> </td></tr>
<tr>
<td><a class="el" href="unionnrf__crypto__ecc__public__key__calculate__context__t.html">nrf_crypto_ecc_public_key_calculate_context_t</a> </td><td><a class="el" href="group__nrf__crypto__ecc__secp256r1.html#ga2435692dd5c1a6cd80ca4160cb62b358">nrf_crypto_ecc_secp256r1_public_key_calculate_context_t</a> </td></tr>
<tr>
<td><a class="el" href="unionnrf__crypto__ecdh__context__t.html">nrf_crypto_ecdh_context_t</a> </td><td><a class="el" href="group__nrf__crypto__ecdh__secp256r1.html#ga2eaa7eada0871cabb13faaee35dffdab">nrf_crypto_ecdh_secp256r1_context_t</a> </td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecdh.html#gaf613b90b054c190852cdd68d714bb121">nrf_crypto_ecdh_shared_secret_t</a> </td><td><a class="el" href="group__nrf__crypto__ecdh__secp256r1.html#ga9075a0449192e6db445cc2660aa7c9be">nrf_crypto_ecdh_secp256r1_shared_secret_t</a> </td></tr>
<tr>
<td><a class="el" href="group__nrf__crypto__ecdsa.html#ga3b35776fcaaca75d073c7067769f0445">nrf_crypto_ecdsa_signature_t</a> </td><td><a class="el" href="group__nrf__crypto__ecdsa__secp256r1.html#ga06a0854c80257b410f0e4a5950578785">nrf_crypto_ecdsa_secp256r1_signature_t</a> </td></tr>
<tr>
<td><a class="el" href="unionnrf__crypto__ecdsa__sign__context__t.html">nrf_crypto_ecdsa_sign_context_t</a> </td><td><a class="el" href="group__nrf__crypto__ecdsa__secp256r1.html#ga50b3357b66ba843dde7262e410e723c2">nrf_crypto_ecdsa_secp256r1_sign_context_t</a> </td></tr>
<tr>
<td><a class="el" href="unionnrf__crypto__ecdsa__verify__context__t.html">nrf_crypto_ecdsa_verify_context_t</a> </td><td><a class="el" href="group__nrf__crypto__ecdsa__secp256r1.html#gab9ace5bd4cea183d48d543557f451df1">nrf_crypto_ecdsa_secp256r1_verify_context_t</a> </td></tr>
</table>
<p>The following example demonstrates how to use curve-specific types to hold a newly generated key pair.</p>
<div class="fragment"><div class="line"><a class="code" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b" title="API Result.">ret_code_t</a> err_code;</div>
<div class="line"><a class="code" href="unionnrf__crypto__ecc__key__pair__generate__context__t.html" title="Union holding a context for a key pair generation.">nrf_crypto_ecc_key_pair_generate_context_t</a>  keygen_context;</div>
<div class="line"><a class="code" href="group__nrf__crypto__ecc__secp256r1.html#gaa08f47f876f197d1f097f3582e4ddcf7" title="Structure holding internal representation of a private key for secp256r1 (NIST 256-bit)">nrf_crypto_ecc_secp256r1_private_key_t</a>      private_key;</div>
<div class="line"><a class="code" href="group__nrf__crypto__ecc__secp256r1.html#ga51c2af12c64b6d66c738726ce68adee6" title="Structure holding internal representation of a public key for secp256r1 (NIST 256-bit)">nrf_crypto_ecc_secp256r1_public_key_t</a>       public_key;</div>
<div class="line"></div>
<div class="line">err_code = <a class="code" href="group__nrf__crypto__ecc.html#ga3f81d85351bf50c8dcd07a87cb7c6e26" title="Generate a new pair of a public key and a private key.">nrf_crypto_ecc_key_pair_generate</a>(</div>
<div class="line">    &amp;keygen_context,                                <span class="comment">// Context</span></div>
<div class="line">    &amp;<a class="code" href="group__nrf__crypto__ecc__secp256r1.html#ga7d6a6230b8f267f2d5e9971ea2b3ef42" title="Variable containing information on secp256r1 (NIST 256-bit).">g_nrf_crypto_ecc_secp256r1_curve_info</a>,         <span class="comment">// Info structure</span></div>
<div class="line">    (<a class="code" href="unionnrf__crypto__ecc__private__key__t.html" title="Union holding representation of a private key for any curve type.">nrf_crypto_ecc_private_key_t</a> *)&amp;private_key,   <span class="comment">// Output private key</span></div>
<div class="line">    (<a class="code" href="unionnrf__crypto__ecc__public__key__t.html" title="Union holding representation of a public key for any curve type.">nrf_crypto_ecc_public_key_t</a> *)&amp;public_key);    <span class="comment">// Output public key</span></div>
</div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Casting pointer types removes type checking that is done during compilation. You must make sure that the provided parameter is big enough for the currently used curve. See <a class="el" href="lib_crypto_mem_management.html">Memory management in nrf_crypto</a>.</dd></dl>
<h1><a class="anchor" id="lib_crypto_ecc_supported_curve"></a>
Supported curve types</h1>
<p>Backends offer different types of curves and schemes. To use a specific curve, an appropriate backend and curve inside it must be enabled. The following table summarizes backend support for different types of curves and schemes.</p>
<table class="doxtable">
<tr>
<th></th><th align="center">CC310 </th><th align="center">mbed TLS </th><th align="center">Oberon </th><th align="center">µECC </th><th align="center">CC310_BL </th></tr>
<tr>
<td><b>NIST Group</b> </td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp160r1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp160r2 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp192r1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td></tr>
<tr>
<td>secp224r1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td></tr>
<tr>
<td>secp256r1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td></tr>
<tr>
<td>secp384r1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp521r1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td><b>Koblitz Group</b> </td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp160k1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp192k1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp224k1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>secp256k1 </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td></tr>
<tr>
<td><b>Brainpool Group</b> </td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>bp256r1 </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>bp384r1 </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>bp512r1 </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td><b>Curve25519 Group</b> </td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>Curve25519 <sup>1</sup> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td></tr>
<tr>
<td>Ed25519 <sup>2</sup> </td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"> <CENTER><font color="green">✔</font></CENTER> </td><td align="center"></td><td align="center"></td></tr>
</table>
<p><sup>1</sup> - Curve25519 allows only ECDH. ECDSA is not possible using Curve25519.<br/>
 <sup>2</sup> - Ed25519 is a digital signature scheme only. It does not allow ECDH.<br/>
</p>
<h1><a class="anchor" id="lib_crypto_ecc_examples"></a>
Examples</h1>
<p>See <a class="el" href="lib_crypto_ecdsa.html">ECDH Example</a> and <a class="el" href="lib_crypto_ecdsa_example.html">ECDSA Example</a> for an example of how to handle the keys. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: GFX library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lib_gfx.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GFX library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The GFX library provides support for drawing graphic objects, as well as printing text.</p>
<p>Main features:</p>
<ul>
<li>Support for drawing lines, rectangles, and circles.</li>
<li>Support for printing text on the screen.</li>
<li>Support for drawing bitmaps in RGB565 color format.</li>
<li>Hardware independent.</li>
<li>Any number of instances.</li>
</ul>
<p>The library uses Bresenham's algorithms for drawing objects. These are simple and efficient algorithms for drawing straight lines and circles on a grid of pixels.</p>
<p>For full API documentation of the library, see <a class="el" href="group__nrf__gfx.html">GFX Library</a>.</p>
<h1><a class="anchor" id="gfx_lib_lcd"></a>
LCD abstraction</h1>
<p>In order to make the GFX library more generic, all of the GFX functions use pointers to an abstract LCD structure - <a class="el" href="structnrf__lcd__t.html">nrf_lcd_t</a>. This structure contains pointers to the LCD generic function and a control block to keep the state of the LCD. Functions <a class="el" href="structnrf__lcd__t.html#accce4f335d5d596e91270209dadad449">nrf_lcd_t::lcd_pixel_draw</a> and <a class="el" href="structnrf__lcd__t.html#a98605b3be06ecc9d15b3d66c9bf81521">nrf_lcd_t::lcd_rect_draw</a> must be implemented to use all functions for drawing objects. Other functions are optional - for example, if you do not need any initialization for your LCD, you do not need to implement the <code>lcd_init</code> function. However, you must provide a pointer to every function, even if it is a pointer to an empty function.</p>
<dl class="section note"><dt>Note</dt><dd><a class="el" href="structnrf__lcd__t.html#ab952d766713d234c63b3ee37b10f05da">nrf_lcd_t::p_lcd_cb</a> keeps information about the state of the LCD so even if you do not need any initialization, you must still call <code>nrf_gfx_init</code> to set LCD in proper state. This function will also check if pointers to functions are not NULL.</dd></dl>
<p>This generic API guarantees that you can pick almost any LCD controller and adapt it to use the GFX library. The drawback is that some optimizations specific for your controller may be incompatible with this library.</p>
<h1><a class="anchor" id="gfx_lib_init"></a>
Initialization and starting</h1>
<p>The module itself does not require any initializing but in order to start working with your LCD, you must call <code>nrf_gfx_init</code>. This function calls the LCD initializing function and sets the proper state of your LCD control block. The most important part is to fill the LCD generic structure - <a class="el" href="structnrf__lcd__t.html">nrf_lcd_t</a> with proper function pointers and proper information about the LCD.</p>
<p>The following is an example of initialization of the GFX library using a driver for the ILI9341 controller (available in this SDK in the <code>drivers_ext</code> folder).</p>
<div class="fragment"><div class="line"><span class="keyword">extern</span> <a class="code" href="structnrf__lcd__t.html" title="LCD instance type.">nrf_lcd_t</a> nrf_lcd_ili9341;      <span class="comment">// This is defined in ili9341.c</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="structnrf__lcd__t.html" title="LCD instance type.">nrf_lcd_t</a> * p_lcd = &amp;nrf_lcd_ili9341;</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__app__error.html#ga82d00a810dcea7dcc6af469461fb254c" title="Macro for calling error handler function if supplied error code any other than NRF_SUCCESS.">APP_ERROR_CHECK</a>(<a class="code" href="group__nrf__gfx.html#ga1d5e5807f4795c88c787e45c69649506" title="Function for initializing the GFX library.">nrf_gfx_init</a>(p_lcd));</div>
</div><!-- fragment --><h1><a class="anchor" id="gfx_lib_drawing"></a>
Drawing objects</h1>
<p>To draw an object using GFX, you must call the proper function with parameters of this object, which are typically start point, end point, radius width, color etc. To facilitate the usage of this library, a set of macros is provided which will help you define your object. For example, to draw a line, execute the following code example (assuming you already initialized your LCD with <code>nrf_gfx_init</code>):</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define RED             0xF800</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><a class="code" href="structnrf__gfx__line__t.html" title="GFX line object structure.">nrf_gfx_line_t</a> my_line = NRF_GFX_LINE(<a class="code" href="group__nrf__gfx.html#ga271b42dd0863dd8e78ce03fde7e50f73" title="Function for getting the width of the screen.">nrf_gfx_width_get</a>(p_lcd),</div>
<div class="line"><a class="code" href="group__nrf__gfx.html#gaf31d616342994821b27c2949679d927e" title="Function for getting the height of the screen.">nrf_gfx_height_get</a>(p_lcd), </div>
<div class="line">0, </div>
<div class="line"><a class="code" href="group__nrf__gfx.html#gaf31d616342994821b27c2949679d927e" title="Function for getting the height of the screen.">nrf_gfx_height_get</a>(p_lcd), </div>
<div class="line">1);</div>
<div class="line"><a class="code" href="group__nrf__gfx.html#gacffd2edf5ac3619780c6467765b36167" title="Function for drawing a line.">nrf_gfx_line_draw</a>(p_lcd, &amp;my_line, RED);</div>
</div><!-- fragment --><p>To draw any other object, the steps are very similar, you only need to use the proper function.</p>
<dl class="section note"><dt>Note</dt><dd>Color type is uint32_t but you can cast it inside your drawing function to any type you want. In this way, you can use this library with an RGB888 LCD, as well as with a monochromatic one.</dd></dl>
<h1><a class="anchor" id="gfx_lib_frame_buffer"></a>
LCD frame buffer</h1>
<p>In some cases, LCD drivers may not support the drawing of a single pixel or you may want to use a frame buffer to accelerate the drawing operations. Another solution is to implement <a class="el" href="structnrf__lcd__t.html#accce4f335d5d596e91270209dadad449">nrf_lcd_t::lcd_pixel_draw</a> and <a class="el" href="structnrf__lcd__t.html#a98605b3be06ecc9d15b3d66c9bf81521">nrf_lcd_t::lcd_rect_draw</a> to write to your internal frame buffer. Then, you can implement the <a class="el" href="structnrf__lcd__t.html#a88ca6b27ca835b7f19535465306877d6">nrf_lcd_t::lcd_display</a> function to write the whole buffer to the screen. It gives you control over hardware communication with your controller and allows to refresh the screen only when needed.</p>
<h1><a class="anchor" id="gfx_lib_fonts"></a>
GFX fonts</h1>
<p>The library comes with two different fonts but you can generate any kind of font yourself. To generate fonts, you can use <a href="http://www.eran.io/the-dot-factory-an-lcd-font-and-image-generator/" target="_blank">The Dot Factory</a> free font generator. The GFX library is designed to be compatible with fonts generated by The Dot Factory tool. Once you generate your font, you only need to pass the font descriptor to <a class="el" href="group__nrf__gfx.html#ga21d3218bbe38fed5ea8ba0e6a1558d52">nrf_gfx_print</a> :</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * test_text = <span class="stringliteral">&quot;This is nRF52&quot;</span>;</div>
<div class="line"></div>
<div class="line"><span class="keyword">extern</span> <span class="keyword">const</span> <a class="code" href="struct_f_o_n_t___i_n_f_o.html" title="Font descriptor.">FONT_INFO</a> microsoftSansSerif_16ptFontInfo;</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <a class="code" href="struct_f_o_n_t___i_n_f_o.html" title="Font descriptor.">FONT_INFO</a> * p_font = &amp;microsoftSansSerif_16ptFontInfo;</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> text_print(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structnrf__gfx__point__t.html" title="GFX point object structure.">nrf_gfx_point_t</a> text_start = NRF_GFX_POINT(10, 10);</div>
<div class="line">    <a class="code" href="group__app__error.html#ga82d00a810dcea7dcc6af469461fb254c" title="Macro for calling error handler function if supplied error code any other than NRF_SUCCESS.">APP_ERROR_CHECK</a>(<a class="code" href="group__nrf__gfx.html#ga21d3218bbe38fed5ea8ba0e6a1558d52" title="Function for printing a string to the screen.">nrf_gfx_print</a>(p_lcd, &amp;text_start, 0, test_text, p_font, <span class="keyword">true</span>));</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>After generating a font, you must change <a class="el" href="struct_f_o_n_t___i_n_f_o.html#a114ef7b7228d539dcbf18c2999e8b4e9">FONT_INFO::height</a> to be described in bits (pixels), not pages.</dd></dl>
<h1><a class="anchor" id="gfx_lib_example"></a>
Usage example</h1>
<p>For a usage example of this library, see <a class="el" href="gfx_example.html">GFX Library Example</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: Message and record parser</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nfc_ndef_parse_module_dox.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Message and record parser </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>If you use the nRF5 SDK to implement an NFC polling device, you can use the NDEF message parser module to interpret the NDEF messages that are read from the NFC tag. See the documentation for the <a class="el" href="nfc_type2tag_parser_dox.html">Type 2 Tag parser</a> for information about how to read the content of the tag.</p>
<p>The NDEF message parser resolves NDEF messages to message descriptors (see <a class="el" href="structnfc__ndef__msg__desc__t.html">nfc_ndef_msg_desc_t</a>). The main module <a class="el" href="group__nfc__ndef__parser.html">NDEF message parser</a> provides functionality for parsing NDEF messages and printing out their content. It uses the <a class="el" href="group__nfc__ndef__record__parser.html">Parser for NDEF records</a>, which provides functionality for parsing NDEF records to record descriptors (see <a class="el" href="structnfc__ndef__record__desc__t.html">nfc_ndef_record_desc_t</a>). The <a class="el" href="group__nfc__ndef__record__parser.html">Parser for NDEF records</a> can also be used to print out record contents.</p>
<p>When parsing a message, you must provide memory for the message descriptor instance, which holds pointers to the record descriptors. The record descriptors, in turn, point to the locations of the record fields, which are located in the NFC data that was parsed. These fields are not copied.</p>
<p>To calculate the buffer size that is required, use <a class="el" href="group__nfc__ndef__msg__parser.html#gaa8a00355585f90aac785605be72b0106">NFC_NDEF_PARSER_REQIRED_MEMO_SIZE_CALC</a>. After parsing is completed successfully, the first address in the buffer is filled by the NDEF message descriptor, which provides a full description of the parsed NDEF message.</p>
<p>The following code example shows how to parse an NDEF message, after you have used the <a class="el" href="nfc_type2tag_parser_dox.html">Type 2 Tag parser</a> to read the NFC data:</p>
<div class="fragment"><div class="line">uint32_t nfc_data_len = …; <span class="comment">// Filled by the length of the NFC data.</span></div>
<div class="line">uint8_t nfc_data[] = …; <span class="comment">// Filled by the value of the NFC data.</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Buffer for parsing results that can hold an NDEF message descriptor with up to 10 records.</span></div>
<div class="line">uint8_t desc_buf[<a class="code" href="group__nfc__ndef__msg__parser.html#gaa8a00355585f90aac785605be72b0106" title="Macro for calculating the memory size required for holding the description of a message that consists...">NFC_NDEF_PARSER_REQIRED_MEMO_SIZE_CALC</a>(10)];</div>
<div class="line">uint32_t desc_buf_len = <span class="keyword">sizeof</span>(desc_buf);</div>
<div class="line"></div>
<div class="line">ret_code = <a class="code" href="group__nfc__ndef__msg__parser.html#gad0ef661cfcb1b7f52efa2705b6f99915" title="Function for parsing NFC NDEF messages.">ndef_msg_parser</a>(desc_buf,</div>
<div class="line">                    &amp;desc_buf_len,</div>
<div class="line">                    nfc_data,</div>
<div class="line">                    &amp;nfc_data_len);</div>
<div class="line"></div>
<div class="line"><span class="keywordflow">if</span> (ret_code != <a class="codeRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__nrf__log.html#gaaea89bb5c09b6033729e059826711bb0" title="Macro for logging error messages. It takes a printf-like, formatted string with up to seven arguments...">NRF_LOG_ERROR</a>(<span class="stringliteral">&quot;Error when parsing an NDEF message.&quot;</span>);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// Print out the parsing results.</span></div>
<div class="line"><a class="code" href="group__nfc__ndef__msg__parser.html#ga6b15f0d6c830e30f06801920fbbb5619" title="Function for printing the parsed contents of an NDEF message.">ndef_msg_printout</a>((<a class="code" href="structnfc__ndef__msg__desc__t.html" title="NDEF message descriptor.">nfc_ndef_msg_desc_t</a> *) desc_buf);</div>
</div><!-- fragment --><p>The <a class="el" href="nfc_adafruit_with_tag_parser.html">Adafruit Tag Reader Example</a> example shows how to use the library in an application.</p>
<p>The <a class="el" href="ble_sdk_app_hrs_nfc_c.html">Experimental: BLE Heart Rate Collector Example with NFC Pairing</a> example shows how to use this library with the <a class="el" href="nfc_connection_handover_msg_parser_dox.html">NFC Connection Handover Message Parser</a> to perform BLE NFC pairing. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

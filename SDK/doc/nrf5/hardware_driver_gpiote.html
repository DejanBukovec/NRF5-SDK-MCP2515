<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: GPIOTE</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('hardware_driver_gpiote.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GPIOTE </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The GPIOTE driver controls the GPIO and GPIOTE peripherals and configures and controls output and input pins. Output pins can be configured to be controlled manually or by a GPIOTE task. Input pins can be configured to be controlled in different modes:</p>
<ul>
<li>High accuracy: An independent GPIOTE event is used to detect changes on the pin. If a pin is configured to be controlled in this mode, a high frequency clock is required.</li>
<li>Low accuracy/low power: A PORT event senses level changes on the pin. One PORT event can be used for multiple pins. Therefore, it is not that accurate and cannot be used to track high-speed pin changes. On the other hand, if a pin is configured in this mode, the system can turn off the high frequency clock when sleeping.</li>
</ul>
<h1><a class="anchor" id="gpiote_allocation"></a>
TASK/EVENT channels allocation</h1>
<p>The number of TASK/EVENT channels that can be used to drive an output pin using a GPIOTE task or to generate an event on input pin change is limited. The driver manages those channels. The user cannot control which channels are used.</p>
<p>When <a class="el" href="group__nrf__drv__gpiote.html#ga00970227fc2c393fbbc71b3d362b58c2">nrf_drv_gpiote_in_init</a> or <a class="el" href="group__nrf__drv__gpiote.html#ga3ffecd1e7795ae9b1ef76e3a61a0a456">nrf_drv_gpiote_out_init</a> is called, the driver allocates a channel from the pool. If all channels are already allocated, the functions return an error code. Note that <a class="el" href="group__nrf__drv__gpiote.html#ga3ffecd1e7795ae9b1ef76e3a61a0a456">nrf_drv_gpiote_out_init</a> allocates a channel only if <a class="el" href="group__nrf__drv__gpiote.html#ga0d31e50d1d7adf4745e14d051f24f68e">nrf_drv_gpiote_out_config_t</a> indicates that the pin will be controlled by a task.</p>
<p>When <a class="el" href="group__nrf__drv__gpiote.html#gac99b571ea6c8133e2072753f8bdac66a">nrf_drv_gpiote_in_uninit</a> or <a class="el" href="group__nrf__drv__gpiote.html#gab54deb741ccb9ea429e9863b6e85147c">nrf_drv_gpiote_out_uninit</a> is called, the driver frees the allocated channel.</p>
<h1><a class="anchor" id="gpiote_configuration"></a>
Driver configuration</h1>
<p>To ensure that the driver configuration is known to all modules, only static configuration is supported. Therefore, <a class="el" href="group__nrf__drv__gpiote.html#ga7281c8acac23d747ebc55c4bf5e27b7b">nrf_drv_gpiote_init</a> has no input parameters. The static configuration parameters are located in the <code>sdk_config.h</code> file.</p>
<p>The configuration parameters include:</p>
<ul>
<li>Interrupt priority level</li>
<li>Maximum amount of low-power events (value needed to statically allocate array for user handlers)</li>
</ul>
<h1><a class="anchor" id="gpiote_initialization"></a>
Driver initialization</h1>
<p>The GPIOTE driver is a shared resource that can be used by multiple modules in an application. Therefore, it can be initialized only once. If a module is using the driver, it must check if it has already been initialized by calling the function <a class="el" href="group__nrf__drv__gpiote.html#ga96adb1d9a985fff8ecd82bf6499bdf3c">nrf_drv_gpiote_is_init</a>. If this function returns false, the module must initialize the driver by calling the function <a class="el" href="group__nrf__drv__gpiote.html#ga7281c8acac23d747ebc55c4bf5e27b7b">nrf_drv_gpiote_init</a>.</p>
<p>The following code example shows how to initialize the driver: </p>
<div class="fragment"><div class="line">uint32_t err_code;</div>
<div class="line"><span class="keywordflow">if</span>(!<a class="code" href="group__nrf__drv__gpiote.html#ga96adb1d9a985fff8ecd82bf6499bdf3c" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_is_init</a>())</div>
<div class="line">{</div>
<div class="line">    err_code = <a class="code" href="group__nrf__drv__gpiote.html#ga7281c8acac23d747ebc55c4bf5e27b7b" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_init</a>();</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="gpiote_out"></a>
Controlling output pins</h1>
<p>After initialization, output pins can be configured to be controlled manually or by a GPIOTE task.</p>
<h2><a class="anchor" id="gpiote_out_initialization"></a>
Initialization</h2>
<p>Output pins are initialized by calling the function <a class="el" href="group__nrf__drv__gpiote.html#ga3ffecd1e7795ae9b1ef76e3a61a0a456">nrf_drv_gpiote_out_init</a>. The argument of type <a class="el" href="group__nrf__drv__gpiote.html#ga0d31e50d1d7adf4745e14d051f24f68e">nrf_drv_gpiote_out_config_t</a> specifies the configuration of the output pin. You can use the following macros to set the configuration:</p>
<ul>
<li><a class="el" href="group__nrf__drv__gpiote.html#ga3772572268d5e99b1fb8cbbb899344bd">GPIOTE_CONFIG_OUT_SIMPLE</a><span></span>: Indicates that the pin will be driven by driver function calls and not by a task. As parameter, you can specify the initial pin state.</li>
<li><a class="el" href="group__nrf__drv__gpiote.html#ga1eb3f9e621a1479382a798b8ba827be8">GPIOTE_CONFIG_OUT_TASK_LOW</a><span></span>: Indicates that a task will be used to clear the pin. The pin is initially set.</li>
<li><a class="el" href="group__nrf__drv__gpiote.html#ga3ac1cae4b38f1684d6c43a27e0243d0a">GPIOTE_CONFIG_OUT_TASK_HIGH</a><span></span>: Indicates that a task will be used to set the pin. The pin is initially cleared.</li>
<li><a class="el" href="group__nrf__drv__gpiote.html#ga49d7347a93cfab1a00ad91acf00482f6">GPIOTE_CONFIG_OUT_TASK_TOGGLE</a><span></span>: Indicates that a task will be used to toggle the pin. The pin is initially set. As parameter, you can specify the initial pin state.</li>
</ul>
<p>The configuration can be modified before calling <a class="el" href="group__nrf__drv__gpiote.html#ga3ffecd1e7795ae9b1ef76e3a61a0a456">nrf_drv_gpiote_out_init</a>.</p>
<p>The following code example configures the 10th pin to be used by the task that sets the pin. The pin is initially set. </p>
<div class="fragment"><div class="line"><a class="code" href="structnrfx__gpiote__out__config__t.html" title="Output pin configuration.">nrf_drv_gpiote_out_config_t</a> config = <a class="code" href="group__nrf__drv__gpiote.html#ga3ac1cae4b38f1684d6c43a27e0243d0a" title="Macro for forwarding the new implementation.">GPIOTE_CONFIG_OUT_TASK_HIGH</a>;</div>
<div class="line">config.init_set = <span class="keyword">true</span>;</div>
<div class="line">err_code = <a class="code" href="group__nrf__drv__gpiote.html#ga3ffecd1e7795ae9b1ef76e3a61a0a456" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_out_init</a>(10, &amp;config);</div>
</div><!-- fragment --><h2><a class="anchor" id="gpiote_out_simple"></a>
Manually controlled output pins</h2>
<p>When a pin is configured as non-task pin, it can be controlled by calling the following functions:</p>
<ul>
<li><a class="el" href="group__nrf__drv__gpiote.html#gadd98c8a54c9be70f98659f179c61a8ab">nrf_drv_gpiote_out_set</a></li>
<li><a class="el" href="group__nrf__drv__gpiote.html#gad44a7f979b352e47ddb0129982519bc3">nrf_drv_gpiote_out_clear</a></li>
<li><a class="el" href="group__nrf__drv__gpiote.html#ga336d6be3a27c110e97bd43cff38f2d60">nrf_drv_gpiote_out_toggle</a></li>
</ul>
<p>The driver asserts if the functions are called on a pin that is configured as task pin.</p>
<h2><a class="anchor" id="gpiote_out_task"></a>
Task-controlled output pins</h2>
<p>When a pin is configured as task pin, it can be controlled using the CPU by writing 1 to the relevant TASK register, or using PPI. Before a pin can be controlled, it must be enabled by calling the function <a class="el" href="group__nrf__drv__gpiote.html#ga321a1a160d2e2708aba4de16e30bd043">nrf_drv_gpiote_out_task_enable</a>.</p>
<p>When a pin is initialized as task pin, it allocates one of the available TASK/EVENT channels. Therefore, you must call <a class="el" href="group__nrf__drv__gpiote.html#gab54deb741ccb9ea429e9863b6e85147c">nrf_drv_gpiote_out_uninit</a> when the pin is no longer used.</p>
<p>The following code example shows how to use a task pin to be toggled using a task: </p>
<div class="fragment"><div class="line"><a class="code" href="structnrfx__gpiote__out__config__t.html" title="Output pin configuration.">nrf_drv_gpiote_out_config_t</a> config = <a class="code" href="group__nrf__drv__gpiote.html#ga49d7347a93cfab1a00ad91acf00482f6" title="Macro for forwarding the new implementation.">GPIOTE_CONFIG_OUT_TASK_TOGGLE</a>(<span class="keyword">false</span>);</div>
<div class="line">err_code = <a class="code" href="group__nrf__drv__gpiote.html#ga3ffecd1e7795ae9b1ef76e3a61a0a456" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_out_init</a>(10, &amp;config);</div>
<div class="line"><span class="keywordflow">if</span> (err_code != <a class="codeRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// handle error condition</span></div>
<div class="line">}</div>
<div class="line">ppi_task_addr = <a class="code" href="group__nrf__drv__gpiote.html#gac8fd3e8fec55a3a46ced3c606a26956e" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_out_task_addr_get</a>(10);</div>
<div class="line"><span class="comment">// Configure PPI using ppi_task_address or use the address to manually control the task.</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#ga321a1a160d2e2708aba4de16e30bd043" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_out_task_enable</a>(10);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Task is enabled and can be used by PPI.</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#gae95bfc1bd2512ebdaabfa7605021576b" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_out_task_disable</a>(10);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Task is disabled and cannot be controlled.</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#ga321a1a160d2e2708aba4de16e30bd043" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_out_task_enable</a>(10);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Task is enabled again and can be controlled using ppi_task_addr.</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#gab54deb741ccb9ea429e9863b6e85147c" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_out_uninit</a>(10);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Pin is uninitialized. Task is disabled and TASK/EVENT channel is freed.</span></div>
</div><!-- fragment --><h1><a class="anchor" id="gpiote_in"></a>
Controlling input pins</h1>
<p>The GPIOTE peripheral can generate events on pin level change using the following methods:</p>
<ul>
<li>Using a dedicated IN_EVENT: When using a dedicated IN_EVENT, one pin is assigned to an event. Only a limited number of pins can be sensed this way because there is a limited number of TASK/EVENT channels. When an IN_EVENT is enabled, it requests the high frequency clock. Therefore, this method is not suitable for scenarios where the system sleeps for a long period of time, expecting to be waken up by a pin level change. This method supports detection of toggling, low-to-high, and high-to-low transition.</li>
<li>Using a PORT event: A PORT event is a single event that is triggered whenever the value of any of the input pins that have sensing enabled changes. Pins can be configured to sense low-to-high or high-to-low transition. Toggle sensing is emulated in the driver by changing the sense configuration whenever a PORT event for a given pin is detected. Using a PORT event requires only a low frequency clock. Therefore, this method is suitable for scenarios where the application expects to be inactive for a long period of time, waiting for a pin level change. The event can be shared by multiple pins; therefore it should be used for sensing slowly changing signals only.</li>
</ul>
<h2><a class="anchor" id="gpiote_in_initialization"></a>
Initialization</h2>
<p>Input pins are initialized by calling the function <a class="el" href="group__nrf__drv__gpiote.html#ga00970227fc2c393fbbc71b3d362b58c2">nrf_drv_gpiote_in_init</a>. The argument of type <a class="el" href="group__nrf__drv__gpiote.html#ga244dbffbf7d579de0327a00e9dec2185">nrf_drv_gpiote_in_config_t</a> specifies the configuration of the input pin. You can use the following macros to set the configuration:</p>
<ul>
<li><a class="el" href="group__nrf__drv__gpiote.html#ga9d0fd4c061fa28b31ce0411dce063685">GPIOTE_CONFIG_IN_SENSE_LOTOHI</a><span></span>: Indicates that the input pin will generate an event when the input value is changed to high. As parameter, you can specify if the input should have high accuracy or not.</li>
<li><a class="el" href="group__nrf__drv__gpiote.html#ga709371c67eaae3beb1f891a2cbf97147">GPIOTE_CONFIG_IN_SENSE_HITOLO</a><span></span>: Indicates that the input pin will generate an event when the input value is changed to low. As parameter, you can specify if the input should have high accuracy or not.</li>
<li><a class="el" href="group__nrf__drv__gpiote.html#gae527f4b185d277427b1aa924474a8760">GPIOTE_CONFIG_IN_SENSE_TOGGLE</a><span></span>: Indicates that the input pin will generate an event when the input value is changed. As parameter, you can specify if the input should have high accuracy or not.</li>
</ul>
<p>The configuration can be modified before calling <a class="el" href="group__nrf__drv__gpiote.html#ga00970227fc2c393fbbc71b3d362b58c2">nrf_drv_gpiote_in_init</a>. Note that macros are not setting any pull.</p>
<p>During the initialization of an input pin, the user must provide an event handler. The event handler will be called by the driver when the configured transition occurs and the interrupt is enabled.</p>
<p>The following code example configures the 10th pin to have pull-up and generate an event on pin toggling: </p>
<div class="fragment"><div class="line"><a class="code" href="structnrfx__gpiote__in__config__t.html" title="Input pin configuration.">nrf_drv_gpiote_in_config_t</a> config = <a class="code" href="group__nrf__drv__gpiote.html#gae527f4b185d277427b1aa924474a8760" title="Macro for forwarding the new implementation.">GPIOTE_CONFIG_IN_SENSE_TOGGLE</a>;</div>
<div class="line">config.<a class="code" href="structnrfx__gpiote__in__config__t.html#a7bcaf8d9e0d2f8283b0932cdbe2a35d1">pull</a> = <a class="code" href="group__nrf__gpio__hal.html#gga07e0c8c0b30499cf0a7b79dbe62d3fccad60f768c699495d9976a45fa7a9f51c6" title="Pin pull-up resistor enabled.">NRF_GPIO_PIN_PULLUP</a>;</div>
<div class="line">err_code = <a class="code" href="group__nrf__drv__gpiote.html#ga00970227fc2c393fbbc71b3d362b58c2" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_in_init</a>(10, &amp;config, pin_event_handler);</div>
</div><!-- fragment --><h2><a class="anchor" id="gpiote_in_usage"></a>
Usage</h2>
<p>From a software point of view, the input sensing functionality is independent of the pin mode. If a high-accuracy pin is used, it can detect signals that are changed faster. Turning off high accuracy, on the other hand, enables the low-power feature.</p>
<p>Events that are generated by an input pin level change can be used to trigger events to be utilized by PPI, and optionally they can trigger a user event handler.</p>
<p>To start sensing an input pin, it must be enabled.</p>
<p>Pin input values can always be checked by calling the function <a class="el" href="group__nrf__drv__gpiote.html#gaf1e45be27303854091ecf4c36e69f9f0">nrf_drv_gpiote_in_is_set</a>.</p>
<p>The following code example shows how to use a pin to detect toggling using high accuracy: </p>
<div class="fragment"><div class="line"><a class="code" href="structnrfx__gpiote__in__config__t.html" title="Input pin configuration.">nrf_drv_gpiote_in_config_t</a> config = <a class="code" href="group__nrf__drv__gpiote.html#gae527f4b185d277427b1aa924474a8760" title="Macro for forwarding the new implementation.">GPIOTE_CONFIG_IN_SENSE_TOGGLE</a>(<span class="keyword">true</span>);</div>
<div class="line">err_code = <a class="code" href="group__nrf__drv__gpiote.html#ga00970227fc2c393fbbc71b3d362b58c2" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_in_init</a>(10, &amp;config, pin_event_handler);</div>
<div class="line"><span class="keywordflow">if</span> (err_code != <a class="codeRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// handle error condition</span></div>
<div class="line">}</div>
<div class="line">ppi_event_addr = <a class="code" href="group__nrf__drv__gpiote.html#ga20fe265e9fe18e68fe467f02be8420ad" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_in_event_addr_get</a>(10);</div>
<div class="line"><span class="comment">// Configure PPI using ppi_event_address.</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Enable event, interrupt is not enabled.</span></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#gaf121f1e2b348cdf1f42afad691c70870" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_in_event_enable</a>(10, <span class="keyword">false</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Event is enabled and can be used by PPI.</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#ga73eb73446d073cbe7814409442e5d7f4" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_in_event_disable</a>(10);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Task is disabled and cannot be controlled.</span></div>
<div class="line"></div>
<div class="line"><span class="comment">// Event and corresponding interrupt are enabled.</span></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#gaf121f1e2b348cdf1f42afad691c70870" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_in_event_enable</a>(10, <span class="keyword">true</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Event is enabled again and can be used by PPI.</span></div>
<div class="line"><span class="comment">// Additionally, any toggling sensed will trigger interrupt</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="group__nrf__drv__gpiote.html#gac99b571ea6c8133e2072753f8bdac66a" title="Macro for forwarding the new implementation.">nrf_drv_gpiote_in_uninit</a>(10);</div>
<div class="line"></div>
<div class="line"><span class="comment">// Pin is uninitialized. Event is disabled and TASK/EVENT channel is freed.</span></div>
</div><!-- fragment --><h2><a class="anchor" id="gpiote_in_sd"></a>
Working with a SoftDevice</h2>
<p>When a SoftDevice is enabled, it can interrupt the application at any time for a certain amount of time. This can lead to the situation where some pin level changes are missed. If the application must track an input pin that can change its level frequently, PPI should be used with a high-accuracy event together with a TIMER in counter mode to count the detected transitions. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

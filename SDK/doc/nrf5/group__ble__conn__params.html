<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: Connection Parameters Negotiation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__ble__conn__params.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Connection Parameters Negotiation<div class="ingroups"><a class="el" href="group__ble__sdk__lib.html">BLE libraries</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Module for initiating and executing a connection parameters negotiation procedure.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__ble__conn__params__config"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__conn__params__config.html">Initiating and executing a connection parameters negotiation procedure configuration</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structble__conn__params__evt__t.html">ble_conn_params_evt_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection Parameters Module event.  <a href="structble__conn__params__evt__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structble__conn__params__init__t.html">ble_conn_params_init_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection Parameters Module init structure. This contains all options and data needed for initialization of the connection parameters negotiation module.  <a href="structble__conn__params__init__t.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga252f638d4581b34315217e41606cbb64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga252f638d4581b34315217e41606cbb64"></a>
typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__conn__params.html#ga252f638d4581b34315217e41606cbb64">ble_conn_params_evt_handler_t</a> )(<a class="el" href="structble__conn__params__evt__t.html">ble_conn_params_evt_t</a> *p_evt)</td></tr>
<tr class="memdesc:ga252f638d4581b34315217e41606cbb64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection Parameters Module event handler type. <br/></td></tr>
<tr class="separator:ga252f638d4581b34315217e41606cbb64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gae819a1b14dbebf447254ec41f644ec42"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__conn__params.html#gae819a1b14dbebf447254ec41f644ec42">ble_conn_params_evt_type_t</a> { <br/>
&#160;&#160;<a class="el" href="group__ble__conn__params.html#ggae819a1b14dbebf447254ec41f644ec42a693314f30d0f73380ae2701d1094179a">BLE_CONN_PARAMS_EVT_FAILED</a>, 
<br/>
&#160;&#160;<a class="el" href="group__ble__conn__params.html#ggae819a1b14dbebf447254ec41f644ec42a5b92634a7d02ed858cc114e73d04d265">BLE_CONN_PARAMS_EVT_SUCCEEDED</a>
<br/>
 }</td></tr>
<tr class="memdesc:gae819a1b14dbebf447254ec41f644ec42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connection Parameters Module event type.  <a href="group__ble__conn__params.html#gae819a1b14dbebf447254ec41f644ec42">More...</a><br/></td></tr>
<tr class="separator:gae819a1b14dbebf447254ec41f644ec42"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga9eb39f84188e0fbbc81966892e8f450b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__conn__params.html#ga9eb39f84188e0fbbc81966892e8f450b">ble_conn_params_init</a> (const <a class="el" href="structble__conn__params__init__t.html">ble_conn_params_init_t</a> *p_init)</td></tr>
<tr class="memdesc:ga9eb39f84188e0fbbc81966892e8f450b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for initializing the Connection Parameters module.  <a href="#ga9eb39f84188e0fbbc81966892e8f450b">More...</a><br/></td></tr>
<tr class="separator:ga9eb39f84188e0fbbc81966892e8f450b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga15207947845d6cdcad5b6847d94e6d10"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__conn__params.html#ga15207947845d6cdcad5b6847d94e6d10">ble_conn_params_stop</a> (void)</td></tr>
<tr class="memdesc:ga15207947845d6cdcad5b6847d94e6d10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for stopping the Connection Parameters module.  <a href="#ga15207947845d6cdcad5b6847d94e6d10">More...</a><br/></td></tr>
<tr class="separator:ga15207947845d6cdcad5b6847d94e6d10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacbff87b2c34166d2604d15c74201ea55"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ble__conn__params.html#gacbff87b2c34166d2604d15c74201ea55">ble_conn_params_change_conn_params</a> (uint16_t conn_handle, <a class="elRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/structble__gap__conn__params__t.html">ble_gap_conn_params_t</a> *p_new_params)</td></tr>
<tr class="memdesc:gacbff87b2c34166d2604d15c74201ea55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for changing the current connection parameters to a new set.  <a href="#gacbff87b2c34166d2604d15c74201ea55">More...</a><br/></td></tr>
<tr class="separator:gacbff87b2c34166d2604d15c74201ea55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Module for initiating and executing a connection parameters negotiation procedure. </p>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a class="anchor" id="gae819a1b14dbebf447254ec41f644ec42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__ble__conn__params.html#gae819a1b14dbebf447254ec41f644ec42">ble_conn_params_evt_type_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Connection Parameters Module event type. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><em><a class="anchor" id="ggae819a1b14dbebf447254ec41f644ec42a693314f30d0f73380ae2701d1094179a"></a>BLE_CONN_PARAMS_EVT_FAILED</em>&nbsp;</td><td class="fielddoc">
<p>Negotiation procedure failed. </p>
</td></tr>
<tr><td class="fieldname"><em><a class="anchor" id="ggae819a1b14dbebf447254ec41f644ec42a5b92634a7d02ed858cc114e73d04d265"></a>BLE_CONN_PARAMS_EVT_SUCCEEDED</em>&nbsp;</td><td class="fielddoc">
<p>Negotiation procedure succeeded. </p>
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gacbff87b2c34166d2604d15c74201ea55"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> ble_conn_params_change_conn_params </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>conn_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="elRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/structble__gap__conn__params__t.html">ble_gap_conn_params_t</a> *&#160;</td>
          <td class="paramname"><em>p_new_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for changing the current connection parameters to a new set. </p>
<p>Use this function to change the connection parameters to a new set of parameter (ie different from the ones given at init of the module). This function is useful for scenario where most of the time the application needs a relatively big connection interval, and just sometimes, for a temporary period requires shorter connection interval, for example to transfer a higher amount of data. If the given parameters does not match the current connection's parameters this function initiates a new negotiation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn_handle</td><td>The connection to change connection parameters on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_new_params</td><td>This contains the new connections parameters to setup.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>Successfully started Connection Parameter update procedure. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_ADDR</td><td>The provided Connection Parameters pointer is invalid. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_PARAM</td><td>The provided Connection Parameters are not valid. </td></tr>
    <tr><td class="paramname">BLE_ERROR_INVALID_CONN_HANDLE</td><td>The provided connection handle is invalid. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_STATE</td><td>The connection is not in a state where this operation can performed. </td></tr>
    <tr><td class="paramname">NRF_ERROR_BUSY</td><td>Could not start operation at this time. Try again later. </td></tr>
    <tr><td class="paramname">NRF_ERROR_NO_MEM</td><td>The SoftDevice lacks the memory to perform the action. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga9eb39f84188e0fbbc81966892e8f450b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> ble_conn_params_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structble__conn__params__init__t.html">ble_conn_params_init_t</a> *&#160;</td>
          <td class="paramname"><em>p_init</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for initializing the Connection Parameters module. </p>
<dl class="section note"><dt>Note</dt><dd>If the negotiation procedure should be triggered when notification/indication of any characteristic is enabled by the peer, then this function must be called after having initialized the services.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_init</td><td>This contains information needed to initialize this module.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>Successful initialization. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_ADDR</td><td>The provided Connection Parameters pointer is invalid. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INVALID_PARAM</td><td>The provided Connection Parameters are not valid. </td></tr>
    <tr><td class="paramname">NRF_ERROR_NULL</td><td><code>p_init</code> was NULL. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INTERNAL</td><td>An unexpected error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga15207947845d6cdcad5b6847d94e6d10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b">ret_code_t</a> ble_conn_params_stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for stopping the Connection Parameters module. </p>
<p>This function is intended to be used by the application to clean up the connection parameters update module. This will stop the connection parameters update timer if running, thereby preventing any impending connection parameters update procedure. This function must be called by the application when it needs to clean itself up (for example, before disabling the bluetooth SoftDevice) so that an unwanted timer expiry event can be avoided.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NRF_SUCCESS</td><td>Successfully stopped module. </td></tr>
    <tr><td class="paramname">NRF_ERROR_BUSY</td><td>Could not complete operation at this time. Try again later. Note that some timers may have been disabled. </td></tr>
    <tr><td class="paramname">NRF_ERROR_INTERNAL</td><td>An unexpected error occurred. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

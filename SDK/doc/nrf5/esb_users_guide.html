<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: Enhanced ShockBurst User Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('esb_users_guide.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Enhanced ShockBurst User Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#esb_features">Features</a></li>
<li class="level1"><a href="#esb_config">Resources</a></li>
<li class="level1"><a href="#esb_backwards">Backward compatibility</a></li>
<li class="level1"><a href="#esb_transaction">Packet transaction</a></li>
<li class="level1"><a href="#esb_getting_started">Setting up an ESB application</a></li>
<li class="level1"><a href="#freq_select">Frequency selection</a></li>
<li class="level1"><a href="#esb_addressing">Pipes and addressing</a></li>
<li class="level1"><a href="#esb_packet_id">Packet identification</a></li>
<li class="level1"><a href="#esb_fifos">FIFOs</a><ul><li class="level2"><a href="#ptx_fifo">PTX FIFO handling</a></li>
<li class="level2"><a href="#prx_FIFO">PRX FIFO handling</a></li>
</ul>
</li>
<li class="level1"><a href="#callback_queuing">Event handling</a></li>
<li class="level1"><a href="#esb_users_guide_examples">Examples</a></li>
<li class="level1"><a href="#esb_migration">Migrating from &mu;ESB</a></li>
</ul>
</div>
<div class="textblock"><p>This user guide describes what Enhanced ShockBurst (ESB) is and how to use it with an nRF5 Series device.</p>
<p>Enhanced ShockBurst (ESB) is a basic protocol supporting two-way data packet communication including packet buffering, packet acknowledgment, and automatic retransmission of lost packets. ESB provides radio communication with low power consumption, and the implementation is small in code size and easy to use.</p>
<p>The ESB protocol was embedded in hardware in the legacy nRF24L Series. The <a class="el" href="group__nrf__esb.html">Enhanced ShockBurst</a> module enables an nRF5 Series device to communicate with an nRF5 or nRF24L Series device using the ESB protocol.</p>
<p>ESB features automatic packet transaction handling for easy implementation of a reliable bidirectional data link. A transaction is a packet exchange between two transceivers, with one transceiver acting as the Primary Receiver (PRX) and the other transceiver acting as the Primary Transmitter (PTX).</p>
<div class="image">
<img src="esb_fig1_star_network.svg" alt="esb_fig1_star_network.svg"/>
<div class="caption">
Enhanced ShockBurst network</div></div>
 <h1><a class="anchor" id="esb_features"></a>
Features</h1>
<ul>
<li>Supports a star network topology with typically one Primary Receiver (PRX) and up to 8 Primary Transmitters (PTX)</li>
<li>1 to 32 bytes dynamic payload length in legacy mode</li>
<li>1 to 252 bytes static payload length between nRF5 Series devices</li>
<li>Bidirectional data transfer between each PTX and the PRX</li>
<li>Packet acknowledgment and automatic packet retransmission functionality</li>
<li>Individual TX and RX FIFOs for every pipe</li>
<li>Backward compatible with legacy nRF24Lxx Enhanced ShockBurst</li>
</ul>
<h1><a class="anchor" id="esb_config"></a>
Resources</h1>
<p>ESB makes use of a fixed set of resources and requires exclusive access to them for <a class="el" href="group__nrf__esb.html">Enhanced ShockBurst</a> to ensure correct operation:</p>
<ul>
<li>Radio (NRF_RADIO)</li>
<li>Timer: NRF_TIMER2, NRF_TIMER3</li>
<li>PPI channels 7, 8, 9, 10, 11, 12, and 13</li>
<li>Software interrupt 0</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>There is no MPU enforcement of this exclusive access, so manipulating these resources gives undefined behavior.</dd></dl>
<p>The radio and timer interrupt handlers run at priority level 0 (highest level), and the ESB callback functions run at priority level 1. Other interrupts used by the application must use priority level 2 or lower (level 2 to 7) to ensure correct operation.</p>
<h1><a class="anchor" id="esb_backwards"></a>
Backward compatibility</h1>
<p>The nRF24L ESB examples found in the legacy nRFgo SDK can be used with the <a class="el" href="esb_examples_low_power_ptx_prx.html">Low Power Transmitter/Receiver Example</a>. However, since the nRF24L ESB examples do not use "payload in ACK" or dynamic payload length, the low power example requires different radio parameters and slightly altered behavior in this case. Therefore, you must add the following define to the main.c file of the low power Transmitter and low power Receiver example to make them compatible with nRF24L:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define NRF_ESB_LEGACY</span></div>
</div><!-- fragment --><h1><a class="anchor" id="esb_transaction"></a>
Packet transaction</h1>
<p>An Enhanced ShockBurst packet transaction is initiated by a packet transmission from the PTX and successfully completed when the PTX has received an acknowledgment packet (ACK packet) from the PRX.</p>
<p>To enable a bidirectional data link, the PRX is allowed to attach a data payload to the ACK packet. To do so, the PRX adds a packet to its TX FIFO, which is sent as the payload in the next ACK packet.</p>
<div class="image">
<img src="esb_fig2_ptx_trans_ok.svg" alt="esb_fig2_ptx_trans_ok.svg"/>
<div class="caption">
PTX to PRX packet transaction</div></div>
<p> If the PTX does not receive the ACK after the initial transmitted packet, it attempts to retransmit the packet until the ACK is finally being received. The maximum number of allowed retransmission attempts and the delay between each attempt is specified by the most recent call to either <a class="el" href="group__nrf__esb.html#ga6a0097525e07dbe2a1de56c5af5da758">nrf_esb_init</a> (where the values of <a class="el" href="structnrf__esb__config__t.html#adcfcb24f782bdd08ce3b09ed7144454d">nrf_esb_config_t::retransmit_count</a> and <a class="el" href="structnrf__esb__config__t.html#ac935fe712678e8205c35ce795a9624ee">nrf_esb_config_t::retransmit_delay</a> in the <a class="el" href="structnrf__esb__config__t.html">nrf_esb_config_t</a> structure specify the number of retransmission attempts and the delay between them, respectively) or the functions <a class="el" href="group__nrf__esb.html#gab21498d52c7b4e00d54136ed7e7ed15c">nrf_esb_set_retransmit_count</a> and <a class="el" href="group__nrf__esb.html#ga3fc3afb627f70b337fd473a4c9ffad54">nrf_esb_set_retransmit_delay</a>. The retransmission delay is defined as the duration between the start of each transmission attempt. Note that this differs from the legacy nRF24L Series hardware implementation, where the delay was defined as the duration from the end of a packet transmission until the start of the retransmission.</p>
<p>If the ACK packet sent from the PRX to the PTX is lost, but both the initial packet and the subsequent retransmission attempts are being successfully received by the PRX, the repeated packets will be discarded by the PRX. This prevents the PRX application from receiving duplicate packets. However, repeated packets will always be ACKed by the PRX, even though they are being discarded.</p>
<div class="image">
<img src="esb_fig3_prx_ptx_trans_fail.svg" alt="esb_fig3_prx_ptx_trans_fail.svg"/>
<div class="caption">
Failed package transaction</div></div>
<p> A PTX can select that individual packets that are transmitted to the PRX do not require an ACK to be sent in return from the PRX. This decision is taken by the application when uploading a packet to the TX FIFO using the <a class="el" href="structnrf__esb__payload__t.html#a741a3a7f2901ac7769dea35f3a781588">nrf_esb_payload_t::noack</a> field of the <code>p_payload</code> parameter that is passed to the <a class="el" href="group__nrf__esb.html#gaf3ce65553e67d5f8b16da1683e60686a">nrf_esb_write_payload</a> function.</p>
<p>When the PRX receives a packet that does not require an ACK, it does not send an ACK packet to the PTX, and as a result the PTX will continue retransmitting the packet until the maximum number of allowed retransmission attempts is reached.</p>
<h1><a class="anchor" id="esb_getting_started"></a>
Setting up an ESB application</h1>
<p>Perform the following steps to set up an application to send and receive packets:</p>
<ol type="1">
<li>Initialize ESB using <a class="el" href="group__nrf__esb.html#ga6a0097525e07dbe2a1de56c5af5da758">nrf_esb_init</a>. You can use the default parameters in <a class="el" href="group__nrf__esb.html#gadbf3a0cc401dcb83b49a200ca7139bc9">NRF_ESB_DEFAULT_CONFIG</a> as starting point for the <code>p_config</code> parameter and reconfigure them if needed.</li>
<li>If necessary, use any of the folowing functions to update the addresses, the address prefix, the channel, and the bitrate:<ul>
<li><a class="el" href="group__nrf__esb.html#ga6a1540840624ddb28e56056e96d9a2a3">nrf_esb_set_base_address_0</a></li>
<li><a class="el" href="group__nrf__esb.html#ga59ae0a6bf2dface29a857f3520d5a197">nrf_esb_set_base_address_1</a></li>
<li><a class="el" href="group__nrf__esb.html#ga083177c459311f41c6a48b55fb6d5ed1">nrf_esb_set_prefixes</a></li>
<li><a class="el" href="group__nrf__esb.html#gaeac65f947f1be24719a40f5968c9d34b">nrf_esb_set_rf_channel</a></li>
<li><a class="el" href="group__nrf__esb.html#gafc6f07541689ad4299b2e7100813d984">nrf_esb_set_bitrate</a></li>
</ul>
</li>
<li>Make sure that the high-frequency clock is running: <div class="fragment"><div class="line">NRF_CLOCK-&gt;EVENTS_HFCLKSTARTED = 0;</div>
<div class="line">NRF_CLOCK-&gt;TASKS_HFCLKSTART = 1;</div>
<div class="line"><span class="keywordflow">while</span> (NRF_CLOCK-&gt;EVENTS_HFCLKSTARTED == 0);</div>
</div><!-- fragment --></li>
<li>Start sending or receiving packets:<ul>
<li>If the node is a PTX:<ol type="a">
<li>Add packets to the TX FIFO by calling <a class="el" href="group__nrf__esb.html#gaf3ce65553e67d5f8b16da1683e60686a">nrf_esb_write_payload</a>.</li>
<li>Depending on the value of <a class="el" href="structnrf__esb__config__t.html#a06ed0f826d862a702aa56da7e6770e3f">nrf_esb_config_t::tx_mode</a> that was used in the most recent call to <a class="el" href="group__nrf__esb.html#ga6a0097525e07dbe2a1de56c5af5da758">nrf_esb_init</a>, you might have to call <a class="el" href="group__nrf__esb.html#ga9ed11ada493d27ebf06d245f4e964b99">nrf_esb_start_tx</a> to start the transmission.</li>
<li>After the radio has received an acknowledgment or timed out, handle <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396a77f62ceed926e00788a7ce60c079c71d">NRF_ESB_EVENT_TX_SUCCESS</a>, <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396ad592594440aafce520640168bf22f262">NRF_ESB_EVENT_TX_FAILED</a>, and <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396a8683759e4d47c13f9b79cd33b4c7d803">NRF_ESB_EVENT_RX_RECEIVED</a> events.</li>
</ol>
</li>
<li>If the node is a PRX:<ol type="a">
<li>Handle <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396a8683759e4d47c13f9b79cd33b4c7d803">NRF_ESB_EVENT_RX_RECEIVED</a> events as packets are coming in. Multiple packets might arrive in the RX FIFO between each event.</li>
<li>To attach payloads to acknowledgment packets, add them to the TX FIFO using <a class="el" href="group__nrf__esb.html#gaf3ce65553e67d5f8b16da1683e60686a">nrf_esb_write_payload</a>. The payload must be queued before a packet is received. After a queued payload is sent with an acknowledgment, it is assumed that it reaches the other device. Therefore, an <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396a77f62ceed926e00788a7ce60c079c71d">NRF_ESB_EVENT_TX_SUCCESS</a> event is queued.</li>
</ol>
</li>
</ul>
</li>
</ol>
<p>To stop the ESB module, call <a class="el" href="group__nrf__esb.html#gaaf294295950f0bc3a3cea6b8ae0f81f3">nrf_esb_disable</a>. Note, however, that if a transaction is ongoing when you disable the module, it is not completed. Therefore, you might want to check if the module is idle before disabling it.</p>
<h1><a class="anchor" id="freq_select"></a>
Frequency selection</h1>
<p>ESB can send or receive packets using any of the channels that the nRF5 chip can use. The channel is selected by calling the <a class="el" href="group__nrf__esb.html#gaeac65f947f1be24719a40f5968c9d34b">nrf_esb_set_rf_channel</a> function.</p>
<p>The PTX and PRX must be configured to use the same frequency to exchange packets.</p>
<h1><a class="anchor" id="esb_addressing"></a>
Pipes and addressing</h1>
<p>Each logical address on the nodes is termed a pipe. Each pipe maps to one on-air address that is used when transmitting or receiving packets.</p>
<p>The on-air addresses are composed of a 2-4 byte long base address in addition to a 1 byte prefix address. Note that the nRF5 radio uses an alternating sequence of 0 and 1 as the preamble of the packet. Therefore, for packets to be received correctly, the most significant byte of the base address must not be an alternating sequence of 0 and 1, that is, it must not be 0x55 or 0xAA.</p>
<p>Pipe 0 has its own unique base address (base address 0), while pipes 1-7 use the same base address (base address 1). Each of the 8 pipes have a unique byte-long prefix address.</p>
<p>On-air, the most significant bit of each address byte is transmitted first. The most significant byte of the 2-4 byte long base address is the first transmitted address byte, while the prefix byte is transmitted last.</p>
<p>Addresses cannot consist of a 0x00 prefix and an address on the format 0x00XXXXXX (length 4)/0x0000XXXX (length 5). Such a zero address will cause error code <a class="elRef" doxygen="tag_s212_offline.tag:../s212/" href="../s212/group__nrf__error.html#ga0a5831cf5092e0dd43a01869676ee076">NRF_ERROR_INVALID_PARAM</a> to be returned.</p>
<p>Note that the byte ordering in ESB and the nRF5 radio peripheral are not the same, because the address bytes are rearranged in ESB to match the nRF24L radios.</p>
<div class="image">
<img src="esb_packet_format.svg" alt="esb_packet_format.svg"/>
<div class="caption">
Address part of an ESB packet</div></div>
 <h1><a class="anchor" id="esb_packet_id"></a>
Packet identification</h1>
<p>Any packet that is transmitted from a PTX to a PRX is uniquely identified by a two-bit packet ID field (PID) in the packet header together with the packet's Cyclic Redundancy Check (CRC) field. This packet ID is used to distinguish a new packet from the previous packet if it has the same payload.</p>
<p>At the PRX, retransmitted packets are discarded and not added to an RX FIFO. The <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396a8683759e4d47c13f9b79cd33b4c7d803">NRF_ESB_EVENT_RX_RECEIVED</a> event is not called.</p>
<p>The CRC is used in addition to the PID to identify a unique packet. This reduces the likelihood of a packet being falsely identified as a retransmission attempt and discarded by the PRX when several consecutive failed packet transmission attempts occur. This feature is helpful as the PID is only two bits.</p>
<h1><a class="anchor" id="esb_fifos"></a>
FIFOs</h1>
<p>On each node, there is one FIFO queue for RX and one for TX. The FIFOs are shared by all pipes, and <a class="el" href="structnrf__esb__payload__t.html#ac0478793c622e1ad2038672d306cf970">nrf_esb_payload_t::pipe</a> indicates a packet's pipe. For received packets, this field specifies from which pipe the packet came. For transmitted packets, it specifies through which pipe the packet will be sent.</p>
<p>When multiple packets are queued, they are handled in a FIFO fashion, ignoring pipes.</p>
<h2><a class="anchor" id="ptx_fifo"></a>
PTX FIFO handling</h2>
<p>When ESB is enabled in PTX mode, any packets that are uploaded to a TX FIFO will be transmitted at the next opportunity.</p>
<p>When an ACK is successfully received from a PRX, the PTX assumes that the payload was successfully received and added to the PRX's RX FIFO. The successfully transmitted packet is removed from the TX FIFO, so that the next packet in the FIFO can be transmitted.</p>
<p>If an ACK received by a PTX contains a payload, this payload is added to the PTX's RX FIFO.</p>
<h2><a class="anchor" id="prx_FIFO"></a>
PRX FIFO handling</h2>
<p>When ESB is enabled in PRX mode, all enabled pipes (addresses) are simultaneously monitored for incoming packets.</p>
<p>If a new packet that was not previously added to the PRX's RX FIFO is received, and RX FIFO has available space for the packet, the packet is added to the RX FIFO and an ACK is sent in return to the PTX. If the TX FIFO contains any packets, the next serviceable packet in the TX FIFO is attached as a payload in the ACK packet. Note that this TX packet must have been uploaded to the TX FIFO before the packet is received.</p>
<h1><a class="anchor" id="callback_queuing"></a>
Event handling</h1>
<p>When there is an event on the radio, the <a class="el" href="group__nrf__esb.html">Enhanced ShockBurst</a> module analyzes its cause and, if necessary, queues an event to the application. This event indicates a successful operation, a failed operation, or new data available in the RX FIFO.</p>
<p>Events are queued as flags that are read out on the first opportunity to trigger a software interrupt. Therefore, there might be multiple radio interrupts between each event that is actually sent to the application. A single <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396a77f62ceed926e00788a7ce60c079c71d">NRF_ESB_EVENT_TX_SUCCESS</a> or <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396ad592594440aafce520640168bf22f262">NRF_ESB_EVENT_TX_FAILED</a> event indicates one or more successful or failed operations, respectively. An <a class="el" href="group__nrf__esb.html#ggad2654f6ff53a7a29dc717bb0ba767396a8683759e4d47c13f9b79cd33b4c7d803">NRF_ESB_EVENT_RX_RECEIVED</a> event indicates that there is at least one new packet in the RX FIFO. The event handler should make sure to completely empty the RX FIFO when appropriate.</p>
<h1><a class="anchor" id="esb_users_guide_examples"></a>
Examples</h1>
<p>The module implementation on nRF52832 devices include a set of workarounds for hardware erratas. These erratas require a few houndred bytes of code space to determine runtime which workarounds are applicable to the device running the firmware. This is to ensure that firmware based on newer SDKs function as intended on both older and newer revision chips. If you know that your firmware will only on certain devices, you may save a few houndred bytes of code space by removing the workaround. If you are sure that you do not require support for revision 1 chips, you may remove all code blocks within if statements on the format "if((NRF_FICR-&gt;INFO.VARIANT &amp; 0x0000FF00) == 0x00004200)". If you are sure that you do not require support for revision 2 chips, you may remove all code blocks within if statements on the format "if((NRF_FICR-&gt;INFO.VARIANT &amp; 0x0000FF00) == 0x00004500)".</p>
<h1><a class="anchor" id="esb_users_guide_examples"></a>
Examples</h1>
<p>The SDK provides the following example applications that show how to use the ESB protocol:</p>
<ul>
<li><a class="el" href="esb_examples_ptx_prx.html">Transmitter/Receiver Example</a></li>
<li><a class="el" href="esb_examples_low_power_ptx_prx.html">Low Power Transmitter/Receiver Example</a></li>
</ul>
<h1><a class="anchor" id="esb_migration"></a>
Migrating from μESB</h1>
<p>The <a class="el" href="group__nrf__esb.html">Enhanced ShockBurst</a> implementation is based on the &mu;ESB module that is available on GitHub. However, there have been some changes to the API to improve the module and make it fit the SDK.</p>
<p>If you have used the &mu;ESB module before and want to migrate to the <a class="el" href="group__nrf__esb.html">Enhanced ShockBurst</a> module in the SDK, follow the tutorial on the <a href="https://devzone.nordicsemi.com/tutorials/33/" target="_blank">Nordic Developer Zone</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

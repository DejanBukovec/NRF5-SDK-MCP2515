<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: Eddystone Beacon Application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ble_sdk_app_es.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Eddystone Beacon Application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div class="whichSDs"><span>This example requires one of the following SoftDevices: <b>S112, S132</b></span></div><p><b>Important:</b> Before you run this example, make sure to <a class="el" href="getting_started_softdevice.html#getting_started_sd">program the SoftDevice</a>.</p>
<p>The Eddystone Beacon Application example can be used to turn your nRF5 Development Kit board into an Eddystone Beacon. The application is intended to be used without modifications. When it is running, the beacon can be configured through the <a class="el" href="group__nrf__ble__escs.html">Eddystone Configuration Service</a>.</p>
<h1><a class="anchor" id="ble_sdk_app_es_eddystone"></a>
Eddystone protocol</h1>
<p>Eddystone is an open beacon format designed by Google that defines a Bluetooth low energy (BLE) message format for proximity beacon messages. See the <a href="https://github.com/google/eddystone/" target="_blank">Eddystone GitHub repository</a> for the protocol specification, the Eddystone Configuration Service specification, and further information. The example application supports all features defined in the specifications except for per-slot variable advertising intervals.</p>
<p>The Eddystone protocol describes different formats for advertising packets, called <em>frame types</em>, that can be used to create beacons. The following frame types are available:</p>
<ul>
<li><b>Eddystone-UID</b> for broadcasting unique 16-byte beacon IDs</li>
<li><b>Eddystone-URL</b> for broadcasting a URL in a compressed encoding format</li>
<li><b>Eddystone-TLM</b> for broadcasting telemetry information about the beacon (encrypted or unencrypted)</li>
<li><b>Eddystone-EID</b> for broadcasting an encrypted ephemeral identifier that changes periodically</li>
</ul>
<p>The example provides five advertising slots, and the user can configure each slot to use any of these frame types. There must not be more than one slot of the Eddystone-TLM frame type, but all other frame types can be used in more than one slots. The slot configuration is done through the <a class="el" href="group__nrf__ble__escs.html">Eddystone Configuration Service</a>.</p>
<h1><a class="anchor" id="ble_sdk_app_es_security"></a>
Security features</h1>
<p>While the Eddystone-UID frame type is broadcast unprotected, the Eddystone-EID frame type provides protection against known beacon vulnerabilities.</p>
<p>The Eddystone-EID frame type randomizes the device ID of the beacon, as well as the encrypted advertising data. This process protects against spoofing and malicious asset tracking, because the encrypted and changing advertising data makes it difficult to fake or track an Eddystone-EID.</p>
<p>If a beacon is configured to broadcast the Eddystone-EID frame type, the Eddystone-TLM frame type is automatically encrypted. Otherwise, the transmitted information would make the device uniquely identifiable. Using encrypted TLM frames also ensures message integrity, which means that you can rely on the telemetry information being sent from the expected beacon. Encrypted Eddystone-TLM is often referred to as Eddystone-eTLM.</p>
<p>Note that you should never use an Eddystone-UID frame type together with Eddystone-EID, because the UID could be used to bypass the security protection.</p>
<h1><a class="anchor" id="ble_sdk_app_es_setup"></a>
Setup</h1>
<p>You can find the source code and the project file of the example in the following folder: <code>&lt;InstallFolder&gt;\examples\ble_peripheral\ble_app_eddystone</code> </p>
<p>There is no need for you to modify the example code to test the beacon application, because most of the configuration is done through the <a class="el" href="group__nrf__ble__escs.html">Eddystone Configuration Service</a> when the beacon is up and running. However, you can configure some basic settings in <code>es_app_config.h</code>. Before going into production, make sure to change the following settings:</p>
<ul>
<li>The <b>device name</b> (<a class="el" href="group__eddystone__app__config.html#ga85c3378e23ea1a0c2a15481b602fbb69">APP_DEVICE_NAME</a>) that is advertised in the scan response when the beacon is in connectable mode. Default: "nRF5x_Eddystone".</li>
<li>The <b>default frame type</b> (<a class="el" href="group__eddystone__app__config.html#ga54c5109675c2accdaed89ac2f8ccf668">DEFAULT_FRAME_TYPE</a>) that is used for all five advertising slots before the beacon is configured. Default: Eddystone-URL.</li>
<li>The <b>lock code</b> (<a class="el" href="group__eddystone__app__config.html#ga2bf9f34509e95b5245e1139b38afbdba">APP_CONFIG_LOCK_CODE</a>) that is required to configure the beacon. Default: FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF (32 F characters).</li>
</ul>
<h1><a class="anchor" id="ble_sdk_app_es_testing"></a>
Testing</h1>
<p>To test the Eddystone Beacon Application, you must install the nRF Beacon for Eddystone Android app. It is available from <a href="https://play.google.com/store/apps/details?id=no.nordicsemi.android.nrfbeacon.nearby" target="_blank">Google Play</a> and the <a href="https://github.com/NordicSemiconductor/Android-nRF-Beacon-for-Eddystone" target="_blank">nRF Beacon for Eddystone GitHub repository</a>.</p>
<p>Test the Eddystone Beacon Application by performing the following steps:</p>
<ol type="1">
<li>Compile and program the application.</li>
<li>Observe that LED 1 on the board starts blinking and that the board starts broadcasting an Eddystone-URL. You can read the URL with any beacon scanner that is compatible with Eddystone.</li>
<li>Press Button 1 on the board to put the board (resp. beacon) in connectable mode for 60 seconds. Observe that LED 3 is turned on.</li>
<li>Open the nRF Beacon for Eddystone app, then tap the connect button on the update tab. The list of connectable Eddystone beacons is displayed.</li>
<li>Select your device. By default, it is advertising as "nRF5x_Eddystone".</li>
<li>Enter the beacon manufacturer lock code. By default, this code is FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF (32 F characters).</li>
<li>Observe that after entering the correct lock code, the application reads through all slots and displays the information for each slot. Also observe that LED 2 is turned on.</li>
<li>Test the supported features of the beacon. For example, configure all slots, then perform a factory reset and ensure that the beacon has been reset to its default state.</li>
<li>Test disabling the automatic relocking capability:<ol type="a">
<li>In the app, select <b>Lock state</b> and set it to <b>Disable automatic relock</b>.</li>
<li>Disconnect from the device and repeat steps 3 to 5. Observe that you can now unlock the beacon without entering a lock code. </li>
</ol>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

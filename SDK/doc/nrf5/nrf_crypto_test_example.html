<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: Test Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('nrf_crypto_test_example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Test Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The nrf_crypto Test Example verifies the functionality of the nrf_crypto operations by using known test vectors approved by the National Institute of Standards and Technology (NIST) and others. All available nrf_crypto backends can be tested by modifying the nrf_crypto section in the <code>sdk_config</code> file, as described in <a class="el" href="lib_crypto_config.html">Configuring nrf_crypto frontend and backends</a>.</p>
<table class="doxtable">
<tr>
<th>Cryptographic mode </th><th>Sub-mode </th><th>Link to standard </th><th>Test Vector Source </th></tr>
<tr>
<td rowspan="6">AES </td><td>CBC </td><td rowspan="3"><a href="https://csrc.nist.gov/projects/cryptographic-algorithm-validation-program/block-ciphers#AES" target="_blank">NIST AES </a> </td><td><a href="https://csrc.nist.gov/projects/cryptographic-algorithm-validation-program/block-ciphers#AES" target="_blank">NIST AES </a> </td></tr>
<tr>
<td>CFB </td><td><a href="https://csrc.nist.gov/projects/cryptographic-algorithm-validation-program/block-ciphers#AES" target="_blank">NIST AES </a> </td></tr>
<tr>
<td>ECB </td><td><a href="https://csrc.nist.gov/projects/cryptographic-algorithm-validation-program/block-ciphers#AES" target="_blank">NIST AES </a> </td></tr>
<tr>
<td>CTR </td><td><a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38a.pdf" target="_blank">NIST SP 800-38A</a> </td><td><a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38a.pdf" target="_blank">NIST SP 800-38A</a> </td></tr>
<tr>
<td>CBC MAC </td><td>CBC MAC </td><td>No official test vectors </td></tr>
<tr>
<td>CMAC </td><td><a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38b.pdf" target="_blank">NIST SP 800-38B</a> </td><td><a href="https://nvlpubs.nist.gov/nistpubs/Legacy/SP/nistspecialpublication800-38b.pdf" target="_blank">NIST SP 800-38B</a> </td></tr>
<tr>
<td rowspan="5">AEAD </td><td>CCM </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/CAVP-TESTING-BLOCK-CIPHER-MODES#CCM" target="_blank">NIST CCM </a> </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/CAVP-TESTING-BLOCK-CIPHER-MODES#CCM" target="_blank">NIST CCM </a> </td></tr>
<tr>
<td>CCM* </td><td>Formal Specification of the CCM* Mode of Operation - September 9, 2005 </td><td>Formal Specification of the CCM* Mode of Operation - September 9, 2005 </td></tr>
<tr>
<td>EAX </td><td><a href="https://csrc.nist.gov/csrc/media/projects/block-cipher-techniques/documents/bcm/proposed-modes/eax/eax-spec.pdf" target="_blank">The EAX Mode of Operation </a> </td><td><a href="https://csrc.nist.gov/csrc/media/projects/block-cipher-techniques/documents/bcm/proposed-modes/eax/eax-spec.pdf" target="_blank">The EAX Mode of Operation </a> </td></tr>
<tr>
<td>GCM </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/CAVP-TESTING-BLOCK-CIPHER-MODES#GCMVS" target="_blank">NIST GCM </a> </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/CAVP-TESTING-BLOCK-CIPHER-MODES#GCMVS" target="_blank">NIST GCM </a> </td></tr>
<tr>
<td>ChaCha-Poly </td><td><a href="https://tools.ietf.org/html/rfc7539" target="_blank">RFC 7539 - ChaCha20 and Poly1305 for IETF Protocols </a> </td><td><a href="https://tools.ietf.org/html/rfc7539" target="_blank">RFC 7539 - ChaCha20 and Poly1305 for IETF Protocols </a> </td></tr>
<tr>
<td rowspan="15">ECDH </td><td>secp160r1 </td><td rowspan="7"><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Component-Testing#ECCCDH" target="_blank">NIST - ECDH </a> </td><td><a href="http://read.pudn.com/downloads168/doc/772358/TestVectorsforSEC%201-gec2.pdf" target="_blank">GEC 2: Test Vectors for SEC 1 </a> </td></tr>
<tr>
<td>secp160r2 </td><td>No test vectors </td></tr>
<tr>
<td>secp192r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Component-Testing#ECCCDH" target="_blank">NIST - ECDH </a> </td></tr>
<tr>
<td>secp224r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Component-Testing#ECCCDH" target="_blank">NIST - ECDH </a> </td></tr>
<tr>
<td>secp256r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Component-Testing#ECCCDH" target="_blank">NIST - ECDH </a> </td></tr>
<tr>
<td>secp384r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Component-Testing#ECCCDH" target="_blank">NIST - ECDH </a> </td></tr>
<tr>
<td>secp521r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Component-Testing#ECCCDH" target="_blank">NIST - ECDH </a> </td></tr>
<tr>
<td>secp160k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>secp192k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>secp224k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>secp256k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>bp256r1 </td><td rowspan="3"><a href="https://tools.ietf.org/html/rfc7027" target="_blank">RFC 7027 - ECC Brainpool Curves for TLS </a> </td><td><a href="https://tools.ietf.org/html/rfc7027" target="_blank">RFC 7027 - ECC Brainpool Curves for TLS </a> </td></tr>
<tr>
<td>bp384r1 </td><td><a href="https://tools.ietf.org/html/rfc7027" target="_blank">RFC 7027 - ECC Brainpool Curves for TLS </a> </td></tr>
<tr>
<td>bp512r1 </td><td><a href="https://tools.ietf.org/html/rfc7027" target="_blank">RFC 7027 - ECC Brainpool Curves for TLS </a> </td></tr>
<tr>
<td>Curve25519 </td><td><a href="https://tools.ietf.org/html/rfc7748" target="_blank">RFC 7748 - Elliptic Curves for Security </a> </td><td><a href="https://tools.ietf.org/html/rfc7748" target="_blank">RFC 7748 - Elliptic Curves for Security </a> </td></tr>
<tr>
<td rowspan="15">ECDSA </td><td>secp160r1 </td><td rowspan="7"><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Digital-Signatures#ecdsa2vs" target="_blank">NIST - ECDSA </a> </td><td>No test vectors </td></tr>
<tr>
<td>secp160r2 </td><td>No test vectors </td></tr>
<tr>
<td>secp192r1 </td><td>No test vectors </td></tr>
<tr>
<td>secp224r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Digital-Signatures#ecdsa2vs" target="_blank">NIST - ECDSA </a> </td></tr>
<tr>
<td>secp256r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Digital-Signatures#ecdsa2vs" target="_blank">NIST - ECDSA </a> </td></tr>
<tr>
<td>secp384r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Digital-Signatures#ecdsa2vs" target="_blank">NIST - ECDSA </a> </td></tr>
<tr>
<td>secp521r1 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Digital-Signatures#ecdsa2vs" target="_blank">NIST - ECDSA </a> </td></tr>
<tr>
<td>secp160k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>secp192k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>secp224k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>secp256k1 </td><td>- </td><td>No test vectors </td></tr>
<tr>
<td>bp256r1 </td><td rowspan="3"><a href="https://tools.ietf.org/html/rfc5639" target="_blank">RFC 5639 - ECC Brainpool Standard Curves and Curve Generation </a> </td><td>No test vectors </td></tr>
<tr>
<td>bp384r1 </td><td>No test vectors </td></tr>
<tr>
<td>bp512r1 </td><td>No test vectors </td></tr>
<tr>
<td>EdDSA </td><td><a href="https://tools.ietf.org/html/rfc8032" target="_blank">RFC 8032 - Edwards-Curve Digital Signature Algorithm (EdDSA) </a> </td><td><a href="https://tools.ietf.org/html/rfc8032" target="_blank">RFC 8032 - Edwards-Curve Digital Signature Algorithm (EdDSA) </a> </td></tr>
<tr>
<td rowspan="2">Hash </td><td>SHA256 </td><td rowspan="2"><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Secure-Hashing#shavs" target="_blank">NIST - SHA </a> </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Secure-Hashing#shavs" target="_blank">NIST - SHA </a> </td></tr>
<tr>
<td>SHA512 </td><td><a href="https://csrc.nist.gov/Projects/Cryptographic-Algorithm-Validation-Program/Secure-Hashing#shavs" target="_blank">NIST - SHA </a> </td></tr>
<tr>
<td rowspan="2">HMAC </td><td>HMAC SHA256 </td><td rowspan="2"><a href="https://csrc.nist.gov/projects/cryptographic-algorithm-validation-program/message-authentication" target="_blank">NIST - HMAC </a> </td><td><a href="https://csrc.nist.gov/projects/cryptographic-algorithm-validation-program/message-authentication" target="_blank">NIST - HMAC </a> </td></tr>
<tr>
<td>HMAC SHA512 </td><td><a href="https://csrc.nist.gov/projects/cryptographic-algorithm-validation-program/message-authentication" target="_blank">NIST - HMAC </a> </td></tr>
<tr>
<td rowspan="2">HKDF </td><td>HKDF SHA256 </td><td rowspan="2"><a href="https://tools.ietf.org/html/rfc5869" target="_blank">RFC 5869 - HMAC-based Extract-and-Expand Key Derivation Function (HKDF) </a> </td><td><a href="https://tools.ietf.org/html/rfc5869" target="_blank">RFC 5869 - HMAC-based Extract-and-Expand Key Derivation Function (HKDF) </a> </td></tr>
<tr>
<td>HKDF SHA512 </td><td><a href="https://tools.ietf.org/html/rfc5869" target="_blank">RFC 5869 - HMAC-based Extract-and-Expand Key Derivation Function (HKDF) </a> </td></tr>
</table>
<p>You can find the source code and the project file of the example in the following folder: <code>&lt;InstallFolder&gt;\examples\crypto\nrf_crypto\test_app</code> </p>
<h1><a class="anchor" id="nrf_crypto_test_example_testing"></a>
Testing</h1>
<p>Test the nrf_crypto test example application by performing the following steps:</p>
<ol type="1">
<li>Compile and program the application.</li>
<li>Observe the result of the different test vectors in the log using an RTT viewer or a terminal emulator. Make sure the test vector verdict is "passed". <pre class="fragment">    #0022 Test vector passed: SHA SHA256 message_len=64</pre></li>
<li>A summary stating the number of passed and failed test vectors will be printed in the end of execution. The total number of executed test cases and test vectors depends on the current nrf_crypto backend. Make sure no test vectors failed. <pre class="fragment">    ***************************************
    All Tests Done
    X test vectors passed
    0 test vectors failed
    ***************************************</pre></li>
</ol>
<h1><a class="anchor" id="nrf_crypto_test_example_adding_test"></a>
Adding additional test cases and test vectors</h1>
<p>Test cases and test vectors can be added to the test suite either by including additional source files or by extending the existing files.</p>
<h2><a class="anchor" id="nrf_crypto_test_example_test_case"></a>
Test Case</h2>
<p>A test case is a function designed to verify parts of the functionality of an nrf_crypto operation. Most nrf_crypto operations, like hash calculations and ECDH, have multiple test cases to be able to cover all features. A typical test case loops over all related test vectors, and logs the verdict of each.</p>
<p>An example of a hash test case in a simplified form is shown in the code block below. </p>
<div class="fragment"><div class="line"><a class="code" href="group__nrf__log__backend__interface.html#ga70f92d89d4f1e729f64a02c6c6ff235e" title="Memory section where backends are located.">NRF_SECTION_DEF</a>(test_vector_hash_data, test_vector_hash_t);</div>
<div class="line"><span class="preprocessor">#define TEST_VECTOR_GET(i)      NRF_SECTION_ITEM_GET(test_vector_hash_data, test_vector_hash_t, (i))    </span><span class="comment">/**&lt; Get number of hash test vectors. */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define TEST_VECTOR_COUNT       NRF_SECTION_ITEM_COUNT(test_vector_hash_data, test_vector_hash_t)       </span><span class="comment">/**&lt; Get test vector reference from array of test vectors. */</span><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><a class="code" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b" title="API Result.">ret_code_t</a> exec_test_case_hash(test_info_t * p_test_info)</div>
<div class="line">{</div>
<div class="line">    uint32_t i;</div>
<div class="line">    <a class="code" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b" title="API Result.">ret_code_t</a> err_code;</div>
<div class="line">    uint32_t hash_test_vector_count = TEST_VECTOR_COUNT;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (i = 0; i &lt; hash_test_vector_count; i++)</div>
<div class="line">    {</div>
<div class="line">        test_vector_hash_t * p_test_vector = TEST_VECTOR_GET(i);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// TODO: Add test code here.</span></div>
<div class="line"></div>
<div class="line">        <span class="comment">// Will goto exit_test_vector if fails.</span></div>
<div class="line">        TEST_VECTOR_ASSERT(err_code);</div>
<div class="line"></div>
<div class="line">        p_test_info-&gt;tests_passed++;</div>
<div class="line"></div>
<div class="line">exit_test_vector: ;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> <a class="codeRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>;</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="nrf_crypto_test_example_test_case_register"></a>
Registering a test case</h2>
<p>A new test case must be registered to the test_case_data section using <a class="el" href="lib_section_vars.html">Experimental: Section variables</a>. The <code>NRF_SECTION_ITEM_REGISTER</code> macro below places the variable test_hash in a section named "test_case_data", which is initialized by main. </p>
<div class="fragment"><div class="line"><a class="code" href="group__section__vars.html#gacc2a038db0790a770a318bbed65c43c3" title="Macro for declaring a variable and registering it in a section.">NRF_SECTION_ITEM_REGISTER</a>(test_case_data, test_case_t test_hash) =</div>
<div class="line">{</div>
<div class="line">    .p_test_case_name = <span class="stringliteral">&quot;Hash test&quot;</span>,        <span class="comment">/**&lt; Pointer to hash test case name. */</span></div>
<div class="line">    .setup = setup_test_case_hash,          <span class="comment">/**&lt; Pointer to hash test case setup function. */</span></div>
<div class="line">    .exec = exec_test_case_hash,            <span class="comment">/**&lt; Pointer to hash test case execute function. */</span></div>
<div class="line">    .teardown = teardown_test_case_hash     <span class="comment">/**&lt; Pointer to hash test case teardown function. */</span></div>
<div class="line">};</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>The macro call to NRF_SECTION_ITEM_REGISTER must be done in a <code></code>.c file.</dd></dl>
<h2><a class="anchor" id="nrf_crypto_test_example_test_vector"></a>
Test Vectors</h2>
<p>A test vector is a set of inputs and expected outputs to verify the functionality provided in a test case. The <code>p_test_vector_name</code> variable is the only required member in the test_vector structures.</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">const</span> <span class="keyword">struct</span></div>
<div class="line">{</div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="structnrf__crypto__hash__info__t.html">nrf_crypto_hash_info_t</a>    * p_hash_info;                  <span class="comment">/**&lt; Pointer to hash info type. */</span></div>
<div class="line">    <span class="keyword">const</span> <a class="code" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b" title="API Result.">ret_code_t</a>                  expected_err_code;            <span class="comment">/**&lt; Expected error code from hash operation. */</span></div>
<div class="line">    <span class="keyword">const</span> uint8_t                     expected_result;              <span class="comment">/**&lt; Expected result of hash operation. */</span></div>
<div class="line">    <span class="keyword">const</span> hash_mem_mode_t             mode;                         <span class="comment">/**&lt; Hash memory operation. */</span></div>
<div class="line">    <span class="keyword">const</span> uint32_t                    chunk_length;                 <span class="comment">/**&lt; Size of input chunks to hash function in bytes. */</span></div>
<div class="line">    <span class="keyword">const</span> uint32_t                    update_iterations;            <span class="comment">/**&lt; Number of update iterations of input. */</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>                      * p_test_vector_name;           <span class="comment">/**&lt; Pointer to hash test vector name. */</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>                      * p_input;                      <span class="comment">/**&lt; Pointer to input message in hex string format. */</span></div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>                      * p_expected_output;            <span class="comment">/**&lt; Pointer to expected message digest in hex string format. */</span></div>
<div class="line">}test_vector_hash_t;</div>
</div><!-- fragment --><h2><a class="anchor" id="nrf_crypto_test_example_test_vector_register"></a>
Register a test vector</h2>
<p>Test vectors are added by registering them for a section defined in the test case code. The test vector is registered in the section "test_vector_hash_data", which is defined in the test case example <code>exec_test_case_hash</code>. The test vector can reuse the already defined hash test vector structure <code>test_vector_hash_t</code>, as shown in the code block below. </p>
<div class="fragment"><div class="line"><span class="comment">// Register a test vector for sha256.</span></div>
<div class="line"><a class="code" href="group__section__vars.html#gacc2a038db0790a770a318bbed65c43c3" title="Macro for declaring a variable and registering it in a section.">NRF_SECTION_ITEM_REGISTER</a>(test_vector_hash_data, test_vector_hash_t test_vector_sha256) =</div>
<div class="line">{</div>
<div class="line">    .p_hash_info        = &amp;<a class="code" href="group__nrf__crypto__hash.html#ga789c282146d8a3c719aee4390b82fc25" title="External variable declaration to info structure for SHA-256.">g_nrf_crypto_hash_sha256_info</a>,                                       <span class="comment">/**&lt; Pointer to sha256 info type. */</span></div>
<div class="line">    .expected_err_code  = <a class="codeRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>,                                                          <span class="comment">/**&lt; The expected error code from the sha operation. */</span></div>
<div class="line">    .expected_result    = EXPECTED_TO_PASS,                                                     <span class="comment">/**&lt; The expected result of the operation. */</span></div>
<div class="line">    .p_test_vector_name = <span class="stringliteral">&quot;SHA256 test vector example&quot;</span>,                                         <span class="comment">/**&lt; Pointer to sha256 test vector name. */</span></div>
<div class="line">    .p_input            = <span class="stringliteral">&quot;c98c8e55&quot;</span>,                                                           <span class="comment">/**&lt; Pointer to input message. */</span></div>
<div class="line">    .p_expected_output  = <span class="stringliteral">&quot;7abc22c0ae5af26ce93dbb94433a0e0b2e119d014f8e7f65bd56c61ccccd9504&quot;</span>    <span class="comment">/**&lt; Pointer to expected digest. */</span></div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="nrf_crypto_test_example_test_output"></a>
Output logging</h2>
<p>The test project generates a test log using RTT transport, as described in the <a class="el" href="nrf_crypto_test_example.html#nrf_crypto_test_example_testing">Testing</a> section. The new test case <code>exec_test_case_hash</code> and its test vector will be added to the test log when the test is executed. The additional test log output will look like the lines below.</p>
<pre class="fragment">***************************************
Test case Hash Test Started
#00XX Test vector passed: SHA256 test vector example
Test case Hash Test Done
***************************************
</pre> </div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: SLIP library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('lib_slip.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SLIP library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Serial Line Internet Protocol (SLIP) library encodes and decodes SLIP packets as defined in <a href="https://tools.ietf.org/html/rfc1055" target="_blank">RFC1055</a>. The module uses buffer memory provided by the user.</p>
<p>See <a class="el" href="group__slip.html">SLIP encoding and decoding</a> for the API documentation.</p>
<h1><a class="anchor" id="lib_slip_general"></a>
SLIP basics</h1>
<p>SLIP is used to encode data streams into packets. This process requires four special bytes: </p>
<table class="doxtable">
<tr>
<th>Name </th><th>Octal </th><th>HEX </th><th>Description</th></tr>
<tr>
<td>END </td><td>300 </td><td>0xC0 </td><td>Defines the end of a packet. </td></tr>
<tr>
<td>ESC </td><td>333 </td><td>0xDB </td><td>Indicates that the following byte should not be interpreted as END or ESC byte. </td></tr>
<tr>
<td>ESC_END </td><td>334 </td><td>0xDC </td><td>Indicates that the data byte has the same value as the END byte, but is not to be interpreted as END byte. </td></tr>
<tr>
<td>ESC_ESC </td><td>335 </td><td>0xDD </td><td>Indicates that the data byte has the same value as the ESC byte, but is not to be interpreted as ESC byte. </td></tr>
</table>
<p>The ESC byte is used to indicate that one of the data bytes has the same value as either the END or the ESC byte, but it should not be interpreted as this special byte. For example, to send a data byte with value END, ESC + ESC_END is sent instead. To send ESC, ESC + ESC_ESC is sent. These sequences are then interpreted as data bytes with the value 0xC0 and 0xDB, respectively. The bytes ESC_END and ESC_ESC do not need to be encoded.</p>
<p>Note that a sequence of <em>n</em> bytes might entirely consist of END and ESC. Therefore, the size of the output packet might be as long as 2*<em>n</em>+1 bytes.</p>
<h1><a class="anchor" id="lib_slip_encoding"></a>
Encoding a SLIP packet</h1>
<p>To encode a buffer using SLIP, call the function <a class="el" href="group__slip.html#ga4f05069d6fb5f256e150cb3ec609f63a">slip_encode</a>. Remember to allocate a sufficiently large output buffer. The following code segment shows how to encode a buffer into a SLIP packet:</p>
<div class="fragment"><div class="line">uint8_t input_buffer[3] = {0x01, 0xC0, 0xDB};</div>
<div class="line">uint8_t output_buffer[<span class="keyword">sizeof</span>(input_buffer)*2];</div>
<div class="line"></div>
<div class="line">uint32_t output_length;</div>
<div class="line"></div>
<div class="line"><a class="code" href="group__slip.html#ga4f05069d6fb5f256e150cb3ec609f63a" title="Function for encoding a SLIP packet.">slip_encode</a>(output_buffer, input_buffer, <span class="keyword">sizeof</span>(input_buffer), &amp;output_length);</div>
</div><!-- fragment --><p>For the sample input, the resulting output buffer is {0x01, 0xDB, 0xDC, 0xDB, 0xDD, 0xC0}.</p>
<h1><a class="anchor" id="lib_slip_decoding"></a>
Decoding a SLIP packet</h1>
<p>To decode a SLIP packet, call the function <a class="el" href="group__slip.html#ga4c6c98bd4b459f69e949030a1bfc01ca">slip_decode_add_byte</a> for each byte that is received. The following code segment shows how to receive and decode SLIP data from UART:</p>
<div class="fragment"><div class="line"><span class="keyword">static</span> uint8_t slip_buffer[128];</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <a class="code" href="structslip__t.html" title="Representation of a SLIP packet.">slip_t</a> slip = {</div>
<div class="line">                .<a class="code" href="structslip__t.html#abed679e4d8d07a055a0df0f8a509dd44" title="Current state of the packet (see slip_read_state_t).">state</a>          = <a class="code" href="group__slip.html#ggac1bd25aae0d28150ec59412205b75bfea28e9e06750fcd78f0c084912c484cc1f" title="Ready to receive the next byte.">SLIP_STATE_DECODING</a>, </div>
<div class="line">                .p_buffer       = slip_buffer,</div>
<div class="line">                .current_index  = 0,</div>
<div class="line">                .buffer_len     = <span class="keyword">sizeof</span>(slip_buffer)}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> uart_event_handler(<a class="code" href="structnrf__drv__uart__event__t.html" title="Structure for UART event.">nrf_drv_uart_event_t</a> * p_event, <span class="keywordtype">void</span> * p_context)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__sdk__error.html#gaf6c20fb483036617204f12e99e0b997b" title="API Result.">ret_code_t</a> ret_code;</div>
<div class="line">    </div>
<div class="line">    uint8_t c = p_event-&gt;data.<a class="code" href="structnrf__drv__uart__event__t.html#a9247f89ec9ab331f07883dc6bff809e7" title="Data provided for transfer completion events.">rxtx</a>.<a class="code" href="structnrf__drv__uart__xfer__evt__t.html#a5f5915d64d08db44d6fed62b4dec2f91" title="Pointer to memory used for transfer.">p_data</a>[0];</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">switch</span> (p_event-&gt;<a class="code" href="structnrf__drv__uart__event__t.html#afb1bc48fee6187c7ce50ea26d706293c" title="Event type.">type</a>)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__uart.html#ggaa84abd1db22d7293580ea4a589e8b454ae9ce9d9931f6f453cbbbdf86962c7e37" title="Requested RX transfer completed.">NRF_DRV_UART_EVT_RX_DONE</a>:</div>
<div class="line">            ret_code = <a class="code" href="group__slip.html#ga4c6c98bd4b459f69e949030a1bfc01ca" title="Function for decoding a SLIP packet.">slip_decode_add_byte</a>(&amp;slip, c);</div>
<div class="line">            </div>
<div class="line">            <span class="keywordflow">switch</span> (ret_code)</div>
<div class="line">            {</div>
<div class="line">                <span class="keywordflow">case</span> <a class="codeRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/group__nrf__error.html#ga7e6367efeaac363d8cf024940b4ec123">NRF_SUCCESS</a>:</div>
<div class="line">                    on_packet_received(slip.<a class="code" href="structslip__t.html#a57706eb7ebbebf7eeb2e45d95b03c14f" title="Decoded data.">p_buffer</a>, slip.<a class="code" href="structslip__t.html#ae8fb946d1e2d6e03bb9b25e5dd0bcb71" title="Current length of the packet that has been received.">current_index</a>);</div>
<div class="line">                    </div>
<div class="line">                    <span class="comment">// fall through</span></div>
<div class="line">                <span class="keywordflow">case</span> <a class="codeRef" doxygen="tag_s140_offline.tag:../s140/" href="../s140/group__nrf__error.html#ga7ef4d466b79b31c6325f8b7af5d4f75f">NRF_ERROR_NO_MEM</a>:</div>
<div class="line">                    slip.<a class="code" href="structslip__t.html#ae8fb946d1e2d6e03bb9b25e5dd0bcb71" title="Current length of the packet that has been received.">current_index</a> = 0;</div>
<div class="line">                    slip.<a class="code" href="structslip__t.html#abed679e4d8d07a055a0df0f8a509dd44" title="Current state of the packet (see slip_read_state_t).">state</a> = <a class="code" href="group__slip.html#ggac1bd25aae0d28150ec59412205b75bfea28e9e06750fcd78f0c084912c484cc1f" title="Ready to receive the next byte.">SLIP_STATE_DECODING</a>;</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                    </div>
<div class="line">                <span class="keywordflow">default</span>:</div>
<div class="line">                    <span class="comment">// no implementation</span></div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">            </div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__uart.html#ggaa84abd1db22d7293580ea4a589e8b454aeb6251f9633625fc1b6c9f24640592ae" title="Requested TX transfer completed.">NRF_DRV_UART_EVT_TX_DONE</a>: <span class="comment">// fall through</span></div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="group__nrf__drv__uart.html#ggaa84abd1db22d7293580ea4a589e8b454aa3e91b71c14e29ca3f2ea8f4d90d1545" title="Error reported by UART peripheral.">NRF_DRV_UART_EVT_ERROR</a>:</div>
<div class="line">            <a class="code" href="group__app__error.html#gace6d059863761677dae5a6b1456a34ba" title="Macro for calling error handler function.">APP_ERROR_HANDLER</a>(p_event-&gt;data.<a class="code" href="structnrf__drv__uart__event__t.html#a7dc1b0b16826eff4a2f655bd221c0a8c" title="Data provided for error event.">error</a>.<a class="code" href="structnrf__drv__uart__error__evt__t.html#afed87cbf7cc8e29f9644648ccdb85c19" title="Mask of error flags that generated the event.">error_mask</a>);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>After the full packet was received, the decoded data is available in <a class="el" href="structslip__t.html#a57706eb7ebbebf7eeb2e45d95b03c14f">slip_t::p_buffer</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>

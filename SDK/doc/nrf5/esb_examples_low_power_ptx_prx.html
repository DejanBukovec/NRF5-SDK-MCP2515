<!-- HTML header for doxygen 1.8.3.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>nRF5 SDK v17.0.2: Low Power Transmitter/Receiver Example</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra_stylesheet_offline.css" rel="stylesheet" type="text/css"/>
<link href="nordic.css" rel="stylesheet" type="text/css" />
<link rel="Shortcut icon" href="./favicon.ico" type="image/x-icon" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%" class="blank">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Nordic Semiconductor" src="nordic_small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">nRF5 SDK
   &#160;<span id="projectnumber">v17.0.2</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
<table cellspacing="0" cellpadding="0" class="blank">
<tr>
<td class="doclinkintro">Choose documentation:</td>
<td class="doclinks" id="nrf5"><a href="../nrf5/index.html">nRF5 SDK</a></td>
<td class="doclinks" id="s112"><a href="../s112/index.html">S112 SoftDevice API</a></td>
<td class="doclinks" id="s113"><a href="../s113/index.html">S113 SoftDevice API</a></td>
<td class="doclinks" id="s122"><a href="../s122/index.html">S122 SoftDevice API</a></td>
<td class="doclinks" id="s132"><a href="../s132/index.html">S132 SoftDevice API</a></td>
<td class="doclinks" id="s140"><a href="../s140/index.html">S140 SoftDevice API</a></td>
<td class="doclinks" id="s212"><a href="../s212/index.html">S212 SoftDevice API</a></td>
<td class="doclinks" id="s312"><a href="../s312/index.html">S312 SoftDevice API</a></td>
<td class="doclinks" id="s332"><a href="../s332/index.html">S332 SoftDevice API</a></td>
<td class="doclinks" id="s340"><a href="../s340/index.html">S340 SoftDevice API</a></td>
</tr>
</table>
<script>
var url=window.location.href.split("/").reverse()[1];
var validLinks= ["nrf5","s112","s113","s122","s132","s140","s212","s312","s332","s340"];
var index;
for (index = 0; index < validLinks.length; ++index) {
   if ( url.indexOf(validLinks[index]) !== -1 ) {
      document.getElementById(validLinks[index]).setAttribute('class', 'doclinks docselected');
   };
};
</script>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('esb_examples_low_power_ptx_prx.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Low Power Transmitter/Receiver Example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This example shows how to use Enhanced ShockBurst (ESB) in an energy-efficient way. Conserving energy is important, for example, when one device is on a small battery that is intended to last for a long period of time while the other device has access to an abundant power source.</p>
<p>This example consists of two applications: a low power Transmitter and a Receiver. The idea is that the Transmitter conserves as much energy as possible and can therefore run on a small battery, while the Receiver needs more power. The Receiver is always on and listens for packets from the Transmitter whenever the Transmitter is active.</p>
<p>The applications are compatible with the nRF24L ESB examples found in the legacy nRFgo SDK. Therefore, you can test the example by programming the supplied applications on two nRF5 development boards, or by programming one of the applications on an nRF5 development board and testing it with the counterpart application from the legacy nRFgo SDK, programmed on an nRF24LE1 device.</p>
<p>If you choose to test one of the applications against a legacy example, you must do a small change to the application code, because the nRF24L ESB examples do not support all features that the <a class="el" href="group__nrf__esb.html">Enhanced ShockBurst</a> module provides. Before you compile and program the application to the nRF5 development board, add the following define to the main.c file of the example to make it compatible with nRF24L:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#define NRF_ESB_LEGACY</span></div>
</div><!-- fragment --><h1><a class="anchor" id="esb_examples_low_power_ptx"></a>
Low power Transmitter</h1>
<p>You can find the source code and the project file of the example in the following folder: <code>&lt;InstallFolder&gt;\examples\proprietary_rf\esb_low_power_ptx</code> </p>
<p>Compile and program the Transmitter application on a board. This application requires a Receiver as counterpart. Either program the <a class="el" href="esb_examples_low_power_ptx_prx.html#esb_examples_low_power_prx">Receiver</a> application on a second board or use an nRF24LE1 device running the PRX example from the nRFgo SDK.</p>
<p>This example application focuses on powering off as much as possible to conserve energy. Most of the time is spent in System OFF state, where almost all parts of the system (including the RAM) are powered off to conserve power. The system does not resume execution when it wakes up, but rather restarts and recovers the state of the system from the GPREGRET register.</p>
<p>When the device is connected to a power source, the application sets up the retention register GPREGRET to count the number of times that the system has woken up. This information is also used to detect the difference between the first startup and waking up, and it is added to the payload that is transmitted to ensure that packets are not identical (and therefore discarded as retransmits). Finally, the application configures the GPIO to wake up the system when a button press is detected, and the system goes to System OFF.</p>
<p>When a button is pressed to wake up the device, the application transmits a packet that describes which button was pressed. It then waits for either a failure or a response from a Receiver.</p>
<p>The <a class="el" href="esb_examples_low_power_ptx_prx.html#esb_examples_low_power_prx">Receiver</a> application sends an acknowledgment with payload, where the payload describes the state of the LEDs of the Receiver. This response is visualized by lighting the LEDs on the Transmitter identically to the LEDs on the Receiver. The LEDs are lit as long as the user pushes a button.</p>
<p>The legacy Receiver example from the nRFgo SDK does not support acknowledgments with payload. Therefore, there is no LED activity if you use the low power Transmitter with a legacy Receiver.</p>
<p>After each successful transmission, the wakeup count in the GPREGRET register is updated, and the system returns to System OFF.</p>
<h1><a class="anchor" id="esb_examples_low_power_prx"></a>
Receiver</h1>
<p>You can find the source code and the project file of the example in the following folder: <code>&lt;InstallFolder&gt;\examples\proprietary_rf\esb_low_power_prx</code> </p>
<p>Compile and program the Receiver application on a board. This application requires a Transmitter as counterpart. Either program the <a class="el" href="esb_examples_low_power_ptx_prx.html#esb_examples_low_power_ptx">Low power Transmitter</a> application a second board or use an nRF24LE1 device running the PTX example from the nRFgo SDK.</p>
<p>This example application is always on and listens for ESB packets. This behavior is not energy efficient, but the purpose is to allow the Transmitter to conserve energy by receiving transmissions at arbitrary times.</p>
<p>Each LED on the board that runs the Receiver application is either on or off. Every time a payload is received that indicates that a button on the Transmitter was pressed, the state of the corresponding LED is toggled. After receiving data from the Transmitter, the application sends an acknowledgment with a payload that contains the state of the LEDs.</p>
<p>Note that because of timing requirements, the <a class="el" href="group__nrf__esb.html">Enhanced ShockBurst</a> module does not wait for the application to upload an acknowledgment packet, but rather uses a packet that was uploaded before the radio interrupt. This means that the state that is shared in the acknowledgment payload is always outdated by one event, but because the pressed button is known to the Transmitter, the state can be updated when the packet is received. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="topicfooter">
<a href="mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback" id="maillink">Documentation feedback</a> | <a href="https://devzone.nordicsemi.com/questions/" target="_blank">Developer Zone</a> | <a href="http://response.nordicsemi.com/subscribe-to-our-newsletters" target="_blank">Subscribe</a> | Updated <span id="date"/>
<script>
var date = new Date("Mon Sep 14 2020" + " UTC");
document.getElementById("date").innerHTML = date.toJSON().slice(0, 10);
var url=window.location.href.split("?")[0];
var filename=url.substring(url.lastIndexOf('/')+1);
document.getElementById("maillink").href = "mailto:docfeedback@nordicsemi.no?subject=Documentation%20feedback"+decodeURIComponent("%26")+"body=File%20name%3A%20"+encodeURIComponent(filename);
</script>
</div>
</body>
</html>
